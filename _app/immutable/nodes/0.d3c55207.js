import{h as At,n as he,O as Fe,r as le,s as R,am as Ot,d as h,c as U,o as w,i as O,P as Ge,Q as je,R as We,H as Pt,z as Nt,e as D,b as S,l as C,m as g,a as j,D as Me,p as fe,a2 as Ye,L as Je,F as Ne,K as G,I as ae,E as Ct,a6 as He,G as Z,B as Qe,a5 as ye,x as ne,y as ie,A as Se,U as ke,X as Re,g as Ve,J as qt,W as Ft}from"../chunks/scheduler.37029f49.js";import{S as ge,i as pe,t as E,b as A,c as W,a as Y,m as J,d as Q,g as de,e as me,h as Oe,j as Gt,f as jt}from"../chunks/index.13406d9d.js";import{w as Ae}from"../chunks/index.6dadb349.js";import{p as Lt}from"../chunks/stores.db212be9.js";import{T as Wt,b as Yt,c as Ue,u as Jt,H as Qt,a as Xt}from"../chunks/renderStats.f4e5f8da.js";import{s as ve,i as Zt}from"../chunks/dom.affe8f60.js";import{A as xt}from"../chunks/WaitingAnimation.362ef76d.js";import{S as $t,s as el,l as tl}from"../chunks/pixi.cbab7a11.js";import{b as ll}from"../chunks/paths.2cd033fc.js";import{g as zt,s as nl}from"../chunks/clock.740c61c8.js";import{e as we}from"../chunks/dom.1da668fa.js";import{t as il,s as al}from"../chunks/idle.90d5b3a2.js";import{P as Xe}from"../chunks/Panel.5aeab6d7.js";import{s as rl}from"../chunks/settings.b3095112.js";import{c as sl,s as ol}from"../chunks/portals.24045b37.js";import{d as _l}from"../chunks/data.8c51c1e0.js";import{n as ul,g as cl,o as fl,p as dl,q as ml,s as hl,t as gl,u as pl,v as bl,h as vl,i as yl,j as kl}from"../chunks/data.5e74e739.js";import{E as wl}from"../chunks/EarthThumbnail.0c8575b2.js";import{W as El}from"../chunks/WaitingScreen.0927bdf3.js";import{s as Tl}from"../chunks/audioCtx.a85b36f2.js";import{T as Il,s as De,a as tt,A as Dl}from"../chunks/AppDialog.957a6ce5.js";import{B as Sl}from"../chunks/Breadcrumb.8e474cb4.js";import{a as Pe,f as Al}from"../chunks/index.76039f5a.js";import{r as Ol}from"../chunks/random.c2e51b4a.js";import{P as Pl}from"../chunks/PendingAnimation.1161366d.js";import{e as lt,u as Nl,o as Cl}from"../chunks/each.e90b838a.js";import{s as Ll}from"../chunks/songs.15ac5b14.js";import{l as zl,s as Ml}from"../chunks/storage.18a7f2b0.js";import{b as Mt,v as Be,m as qe,c as Vl,s as nt,r as it,a as Bl,d as Hl,e as Rl,f as Ul}from"../chunks/play_song.8a0b2a2f.js";import{s as Kl}from"../chunks/dimensions.174be8d8.js";const Vt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,ql=!0,Fl=!1,Wi=Object.freeze(Object.defineProperty({__proto__:null,prerender:ql,ssr:Fl},Symbol.toStringTag,{value:"Module"}));const Gl=[{name:"hue_1",light:"210",comment:"blue"},{name:"color_1",light:"hsl(var(--hue_1), 55%, 50%)",dark:"hsl(var(--hue_1), 55%, 75%)"},{name:"hue_2",light:"120",comment:"green, triad with `--color_3` and `--color_4`"},{name:"color_2",light:"hsl(var(--hue_2), 55%, 32%)",dark:"hsl(var(--hue_2), 45%, 70%)",comment:"same as THEME_COLOR"},{name:"hue_3",light:"251",comment:"purple, triad with `--color_2` and `--color_4`"},{name:"color_3",light:"hsl(var(--hue_3), 50%, 50%)",dark:"hsl(var(--hue_3), 50%, 75%)"},{name:"hue_4",light:"26",comment:"orange, triad with `--color_2` and `--color_3`"},{name:"color_4",light:"hsl(var(--hue_4), 55%, 50%)",dark:"hsl(var(--hue_4), 65%, 75%)"},{name:"hue_5",light:"0",comment:"red"},{name:"color_5",light:"hsl(var(--hue_5), 50%, 50%)",dark:"hsl(var(--hue_5), 50%, 65%)"},{name:"hue_6",light:"32",comment:"brown"},{name:"color_6",light:"hsl(var(--hue_6), 97%, 22%)",dark:"hsl(var(--hue_6), 32%, 75%)"},{name:"hue_7",light:"335",comment:"pink"},{name:"color_7",light:"hsl(var(--hue_7), 74%, 56%)",dark:"hsl(var(--hue_7), 74%, 76%)"},{name:"darken_1",light:"#0000000f",comment:"6%"},{name:"darken_2",light:"#0000001f",comment:"12%"},{name:"darken_3",light:"#00000036",comment:"21%"},{name:"darken_4",light:"#00000052",comment:"32%"},{name:"darken_5",light:"#00000073",comment:"45%"},{name:"darken_6",light:"#000000a6",comment:"65%"},{name:"darken_7",light:"#000000cc",comment:"80%"},{name:"darken_8",light:"#000000e3",comment:"89%"},{name:"darken_9",light:"#000000f5",comment:"96%"},{name:"lighten_1",light:"#ffffff0f",comment:"6%"},{name:"lighten_2",light:"#ffffff1f",comment:"12%"},{name:"lighten_3",light:"#ffffff36",comment:"21%"},{name:"lighten_4",light:"#ffffff52",comment:"32%"},{name:"lighten_5",light:"#ffffff73",comment:"45%"},{name:"lighten_6",light:"#ffffffa6",comment:"65%"},{name:"lighten_7",light:"#ffffffcc",comment:"80%"},{name:"lighten_8",light:"#ffffffe3",comment:"89%"},{name:"lighten_9",light:"#fffffff5",comment:"96%"},{name:"tint_hue",light:"var(--hue_4)"},{name:"tint_saturation",light:"11%"},{name:"bg",light:"hsl(var(--tint_hue), var(--tint_saturation), 96%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 7%)"},{name:"fg",light:"hsl(var(--tint_hue), var(--tint_saturation), 7%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 96%)"},{name:"bg_1",light:"var(--lighten_1)",dark:"var(--darken_1)"},{name:"bg_2",light:"var(--lighten_2)",dark:"var(--darken_2)"},{name:"bg_3",light:"var(--lighten_3)",dark:"var(--darken_3)"},{name:"bg_4",light:"var(--lighten_4)",dark:"var(--darken_4)"},{name:"bg_5",light:"var(--lighten_5)",dark:"var(--darken_5)"},{name:"bg_6",light:"var(--lighten_6)",dark:"var(--darken_6)"},{name:"bg_7",light:"var(--lighten_7)",dark:"var(--darken_7)"},{name:"bg_8",light:"var(--lighten_8)",dark:"var(--darken_8)"},{name:"bg_9",light:"var(--lighten_9)",dark:"var(--darken_9)"},{name:"fg_1",light:"var(--darken_1)",dark:"var(--lighten_1)"},{name:"fg_2",light:"var(--darken_2)",dark:"var(--lighten_2)"},{name:"fg_3",light:"var(--darken_3)",dark:"var(--lighten_3)"},{name:"fg_4",light:"var(--darken_4)",dark:"var(--lighten_4)"},{name:"fg_5",light:"var(--darken_5)",dark:"var(--lighten_5)"},{name:"fg_6",light:"var(--darken_6)",dark:"var(--lighten_6)"},{name:"fg_7",light:"var(--darken_7)",dark:"var(--lighten_7)"},{name:"fg_8",light:"var(--darken_8)",dark:"var(--lighten_8)"},{name:"fg_9",light:"var(--darken_9)",dark:"var(--lighten_9)"},{name:"text_color",light:"var(--text_1)"},{name:"text_1",light:"hsl(var(--tint_hue), var(--tint_saturation), 16%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 80%)"},{name:"text_2",light:"hsl(var(--tint_hue), var(--tint_saturation), 32%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 65%)"},{name:"text_3",light:"hsl(var(--tint_hue), var(--tint_saturation), 48%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 50%)"},{name:"text_disabled",light:"var(--text_3)"},{name:"text_active",light:"hsl(var(--hue_1), 55%, 40%);",dark:"hsl(var(--hue_1), 65%, 65%);"},{name:"line_height",light:"1.25"},{name:"font_family",light:"system-ui, ui-sans-serif, 'Segoe UI Variable Text', 'Segoe UI', Meiryo, Roboto, 'Helvetica Neue', Arial, sans-serif"},{name:"font_family_mono",light:"ui-monospace, 'Fira Mono', monospace"},{name:"size_xs",light:"1rem"},{name:"size_sm",light:"1.3rem"},{name:"size_md",light:"1.6rem"},{name:"size_lg",light:"2.04rem"},{name:"size_1",light:"2.59rem"},{name:"size_2",light:"3.29rem"},{name:"size_3",light:"4.19rem"},{name:"size_4",light:"5.33rem"},{name:"size_5",light:"6.78rem"},{name:"size_6",light:"8.62rem"},{name:"size_7",light:"10.97rem"},{name:"size_8",light:"13.95rem"},{name:"size_9",light:"17.74rem"},{name:"link_color",light:"hsl(var(--hue_1), 61%, 35%)",dark:"hsl(var(--hue_1), 61%, 58%)"},{name:"text_decoration",light:"none"},{name:"text_decoration_hover",light:"underline"},{name:"text_decoration_selected",light:"underline"},{name:"link_active",light:"var(--text_color)"},{name:"spacing_xs5",light:"0.1rem"},{name:"spacing_xs4",light:"0.2rem"},{name:"spacing_xs3",light:"0.3rem"},{name:"spacing_xs2",light:"0.4rem"},{name:"spacing_xs",light:"0.6rem"},{name:"spacing_sm",light:"0.8rem"},{name:"spacing_md",light:"1rem"},{name:"spacing_lg",light:"1.3rem"},{name:"spacing_1",light:"1.6rem"},{name:"spacing_2",light:"2.1rem"},{name:"spacing_3",light:"2.6rem"},{name:"spacing_4",light:"3.3rem"},{name:"spacing_5",light:"4.2rem"},{name:"spacing_6",light:"5.4rem"},{name:"spacing_7",light:"6.9rem"},{name:"spacing_8",light:"8.7rem"},{name:"spacing_9",light:"11.1rem"},{name:"width_md",light:"800px"},{name:"width_sm",light:"320px"},{name:"border_color",light:"var(--border_3)"},{name:"border_1",light:"hsl(var(--tint_hue), 60%, 20%, 15%)",dark:"hsl(var(--tint_hue), 60%, 80%, 85%)"},{name:"border_2",light:"hsl(var(--tint_hue), 60%, 20%, 25%)",dark:"hsl(var(--tint_hue), 60%, 80%, 70%)"},{name:"border_3",light:"hsl(var(--tint_hue), 60%, 20%, 35%)",dark:"hsl(var(--tint_hue), 60%, 80%, 50%)"},{name:"border_4",light:"hsl(var(--tint_hue), 60%, 20%, 45%)",dark:"hsl(var(--tint_hue), 60%, 80%, 40%)"},{name:"border_5",light:"hsl(var(--tint_hue), 60%, 20%, 60%)",dark:"hsl(var(--tint_hue), 60%, 80%, 30%)"},{name:"border_disabled",light:"var(--border_3)"},{name:"border_width",light:"var(--border_width_1)"},{name:"border_width_1",light:"1px"},{name:"border_width_2",light:"2px"},{name:"border_width_3",light:"3px"},{name:"border_width_4",light:"4px"},{name:"border_width_5",light:"6px"},{name:"border_width_6",light:"8px"},{name:"border_style",light:"solid"},{name:"outline_width",light:"var(--outline_width_1)"},{name:"outline_width_1",light:"0"},{name:"outline_width_2",light:"var(--border_width_2)"},{name:"outline_width_3",light:"var(--border_width_1)"},{name:"outline_style",light:"solid"},{name:"outline_color",light:"var(--color_1)"},{name:"button_bg",light:"var(--fg_1)"},{name:"button_bg_hover",light:"var(--fg_2)"},{name:"button_bg_active",light:"var(--bg_3)"},{name:"button_bg_disabled",light:"transparent"},{name:"input_bg",light:"var(--bg_5)"},{name:"input_padding_y",light:"var(--spacing_md)"},{name:"input_padding_x",light:"var(--spacing_lg)"},{name:"input_width_min",light:"100px"},{name:"input_height",light:"var(--spacing_5)"},{name:"input_height_sm",light:"var(--spacing_4)"},{name:"input_height_inner",light:"calc(var(--input_height) - 2 * var(--border_width) - 2 * var(--input_padding_y))"},{name:"box_shadow",light:"2px 4px 9px hsla(var(--tint_hue), var(--tint_saturation), 7%, 0.28), 2px 14px 48px hsla(var(--tint_hue), var(--tint_saturation), 7%, 0.28)",dark:"2px 4px 9px hsla(var(--tint_hue), var(--tint_saturation), 82%, var(--faded_5)), 2px 14px 48px hsla(var(--tint_hue), var(--tint_saturation), 82%, var(--faded_5))"},{name:"box_shadow_lg",light:"2px 6px 14px hsla(var(--tint_hue), var(--tint_saturation), 7%, 0.8), 2px 6px 48px hsla(var(--tint_hue), var(--tint_saturation), 7%, 0.8)",dark:"2px 6px 18px hsla(var(--tint_hue), var(--tint_saturation), 82%, var(--faded_5)), 2px 6px 48px hsla(var(--tint_hue), var(--tint_saturation), 82%, var(--faded_5))"},{name:"drop_shadow",light:"drop-shadow(var(--box_shadow))"},{name:"drop_shadow_lg",light:"drop-shadow(var(--box_shadow_lg))"},{name:"icon_size",light:"var(--icon_size_md)"},{name:"icon_size_xs",light:"18px"},{name:"icon_size_sm",light:"32px"},{name:"icon_size_md",light:"48px"},{name:"icon_size_lg",light:"80px"},{name:"icon_size_1",light:"128px"},{name:"icon_size_2",light:"196px"},{name:"icon_size_3",light:"316px"},{name:"icon_size_4",light:"512px"},{name:"duration_1",light:"0.08s"},{name:"duration_2",light:"0.2s"},{name:"duration_3",light:"0.5s"},{name:"duration_4",light:"1s"},{name:"duration_5",light:"1.5s"},{name:"duration_6",light:"3s"},{name:"faded_1",light:"86%"},{name:"faded_2",light:"62%"},{name:"faded_3",light:"38%"},{name:"faded_4",light:"24%"},{name:"faded_5",light:"15%"},{name:"faded_6",light:"9%"},{name:"disabled_opacity",light:"var(--faded_1)"},{name:"border_radius",light:"var(--border_radius_md)"},{name:"border_radius_md",light:"calc(var(--input_height) / 2)"},{name:"border_radius_sm",light:"calc(var(--border_radius_md) / 1.618)"},{name:"border_radius_xs",light:"calc(var(--border_radius_sm) / 1.618)"},{name:"border_radius_xs2",light:"calc(var(--border_radius_xs) / 1.618)"}],Bt={name:"base",variables:[]},Ht=[Bt,{name:"low contrast",variables:[{name:"tint_saturation",light:"8%"},{name:"bg",light:"hsl(var(--tint_hue), var(--tint_saturation), 86%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 18%)"}]},{name:"high contrast",variables:[{name:"bg",light:"#fff",dark:"#000"},{name:"text_1",light:"hsl(var(--tint_hue), var(--tint_saturation), 8%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 90%)"},{name:"text_2",light:"hsl(var(--tint_hue), var(--tint_saturation), 16%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 83%)"},{name:"text_3",light:"hsl(var(--tint_hue), var(--tint_saturation), 24%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 75%)"}]}],jl=["light","auto","dark"],Wl="#257e25",Rt=n=>{n==="dark"||n!=="light"&&matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},Ze="color-scheme",Yl=(n,e=Ze)=>{try{n===null?localStorage.removeItem(e):localStorage.setItem(e,n)}catch{}},Jl=(n="auto",e=Ze)=>{let t;try{t=localStorage.getItem(e)}catch{return n}return jl.includes(t)?t:n},Ut="theme",Ql=(n,e=Ut)=>{try{n===null?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(n))}catch{}},Xl=(n=Ht[0],e=Ut)=>{try{const t=localStorage.getItem(e),l=t===null?t:JSON.parse(t);if(l)return l}catch{}return n},Zl=(n="light",e=Ze)=>`
	try {
		let c = localStorage.getItem('${e}');
		if (c === 'auto' || (c !== 'dark' && c !== 'light')) {
			c = matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
		}
		if (c === 'dark') document.documentElement.classList.add('dark');
	} catch (_) { ${n==="dark"?"document.documentElement.classList.add('dark');":""} }
`,xl=n=>`<style nonce="%sveltekit.nonce%">
	${n}
</style>`,$l=(n,e={})=>{const{comments:t=!1,id:l=null,empty_default_theme:i=!0,specificity:r=2}=e,a=n.name===Ht[0].name?i?null:Gl:n.variables;if(!(a!=null&&a.length))return"";const o=a.map(_=>at(_)).filter(Boolean),s=a.map(_=>at(_,!0,t)).filter(Boolean),u=(l?"#"+l:":root").repeat(r);return`${o.length?`${u} {
	${o.join(`
	`)}
}`:""}
${s.length?`${u}.dark {
	${s.join(`
	`)}
}`:""}
`.trim()},at=(n,e=!1,t=!0)=>{const l=e?n.dark:n.light;return l?"--"+n.name+": "+l+";"+(t&&n.comment?" /* "+n.comment+" */":""):""},en=Symbol("theme"),tn=n=>At(en,n),ln=Symbol("color_scheme"),nn=n=>At(ln,n),an=n=>({style:n&1,theme_style_html:n&2,theme_setup_script:n&4,selected_theme:n&8,selected_color_scheme:n&16}),rt=n=>({style:n[0],theme_style_html:n[1],theme_setup_script:n[2],selected_theme:n[3],selected_color_scheme:n[4]});function st(n){let e,t;return{c(){e=new Pt(!1),t=le(),this.h()},l(l){e=Nt(l,!1),t=le(),this.h()},h(){e.a=t},m(l,i){e.m(n[1],l,i),O(l,t,i)},p(l,i){i&2&&e.p(l[1])},d(l){l&&(h(t),e.d())}}}function ot(n){let e,t,l,i,r,a;return{c(){e=D("meta"),t=R(),l=D("meta"),i=R(),r=D("script"),a=new Pt(!1),this.h()},l(o){e=S(o,"META",{name:!0,content:!0}),t=U(o),l=S(o,"META",{name:!0,content:!0}),i=U(o),r=S(o,"SCRIPT",{});var s=C(r);a=Nt(s,!1),s.forEach(h),this.h()},h(){g(e,"name","color-scheme"),g(e,"content",n[6]),g(l,"name","theme-color"),g(l,"content",n[5]),a.a=null},m(o,s){O(o,e,s),O(o,t,s),O(o,l,s),O(o,i,s),O(o,r,s),a.m(n[2],r)},p(o,s){s&64&&g(e,"content",o[6]),s&32&&g(l,"content",o[5]),s&4&&a.p(o[2])},d(o){o&&(h(e),h(t),h(l),h(i),h(r))}}}function rn(n){let e,t,l,i,r=n[1]&&st(n),a=n[2]&&ot(n);const o=n[22].default,s=Fe(o,n,n[21],rt);return{c(){r&&r.c(),e=le(),a&&a.c(),t=le(),l=R(),s&&s.c()},l(u){const _=Ot("svelte-1qw2uo0",document.head);r&&r.l(_),e=le(),a&&a.l(_),t=le(),_.forEach(h),l=U(u),s&&s.l(u)},m(u,_){r&&r.m(document.head,null),w(document.head,e),a&&a.m(document.head,null),w(document.head,t),O(u,l,_),s&&s.m(u,_),i=!0},p(u,[_]){u[1]?r?r.p(u,_):(r=st(u),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),u[2]?a?a.p(u,_):(a=ot(u),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),s&&s.p&&(!i||_&2097183)&&Ge(s,o,u,u[21],i?We(o,u[21],_,an):je(u[21]),rt)},i(u){i||(E(s,u),i=!0)},o(u){A(s,u),i=!1},d(u){u&&h(l),r&&r.d(u),h(e),a&&a.d(u),h(t),s&&s.d(u)}}}function sn(n,e,t){let l,i,r,a,o=j,s=()=>(o(),o=Me(V,T=>t(19,a=T)),V),u,_=j,f=()=>(_(),_=Me(M,T=>t(20,u=T)),M);n.$$.on_destroy.push(()=>o()),n.$$.on_destroy.push(()=>_());let{$$slots:d={},$$scope:m}=e,{sync_color_scheme:c=Rt}=e,{load_color_scheme:p=Jl}=e,{save_color_scheme:I=Yl}=e,{load_theme:z=Xl}=e,{save_theme:ee=Ql}=e,{selected_theme:V=Ae(z())}=e;s(),tn(V);let{selected_color_scheme:M=Ae(p())}=e;f(),nn(M);let{color_scheme_fallback:v=void 0}=e,{color_scheme_css:k=void 0}=e,{theme_color:B=void 0}=e,{style:L=null}=e,{theme_style_html:x=null}=e,{theme_setup_script:oe=null}=e,X=0,q=0,re=0;return n.$$set=T=>{"sync_color_scheme"in T&&t(7,c=T.sync_color_scheme),"load_color_scheme"in T&&t(8,p=T.load_color_scheme),"save_color_scheme"in T&&t(9,I=T.save_color_scheme),"load_theme"in T&&t(10,z=T.load_theme),"save_theme"in T&&t(11,ee=T.save_theme),"selected_theme"in T&&s(t(3,V=T.selected_theme)),"selected_color_scheme"in T&&f(t(4,M=T.selected_color_scheme)),"color_scheme_fallback"in T&&t(12,v=T.color_scheme_fallback),"color_scheme_css"in T&&t(13,k=T.color_scheme_css),"theme_color"in T&&t(14,B=T.theme_color),"style"in T&&t(0,L=T.style),"theme_style_html"in T&&t(1,x=T.theme_style_html),"theme_setup_script"in T&&t(2,oe=T.theme_setup_script),"$$scope"in T&&t(21,m=T.$$scope)},n.$$.update=()=>{n.$$.dirty&524288&&t(18,l=a.name),n.$$.dirty&786432&&t(0,L=l===Bt.name?null:$l(a)),n.$$.dirty&1&&t(1,x=L?xl(L):null),n.$$.dirty&4096&&t(2,oe=Zl(v)),n.$$.dirty&1081472&&t(15,X++,X)&&(c==null||c(u)),n.$$.dirty&1114624&&t(16,q++,q)&&(I==null||I(u)),n.$$.dirty&657408&&t(17,re++,re)&&(ee==null||ee(a)),n.$$.dirty&12288&&t(6,i=k??(v==="dark"||v==="light"?v:matchMedia("(prefers-color-scheme: dark)").matches?"dark light":"light dark")),n.$$.dirty&16384&&t(5,r=B??Wl)},[L,x,oe,V,M,r,i,c,p,I,z,ee,v,k,B,X,q,re,l,a,u,m,d]}class on extends ge{constructor(e){super(),pe(this,e,sn,rn,he,{sync_color_scheme:7,load_color_scheme:8,save_color_scheme:9,load_theme:10,save_theme:11,selected_theme:3,selected_color_scheme:4,color_scheme_fallback:12,color_scheme_css:13,theme_color:14,style:0,theme_style_html:1,theme_setup_script:2})}}const _n=.0033,un=(n,e,t,l=0,i=0,r=.2,a=_n)=>{n.baseTexture.setStyle($t.LINEAR);const o=new Wt(n,e,t);o.alpha=r;const{subscribe:s,update:u}=Ae({sprite:o,width:e,height:t,x:l,y:i});return{subscribe:s,update_dimensions:(_,f)=>{u(d=>{const{sprite:m}=d;return!m||d.width===_&&d.height===f?d:(m.width=_,m.height=f,{...d,width:_,height:f})})},tick:_=>{u(f=>{const{sprite:d}=f;if(!d||!_)return f;const m=d.tilePosition.x+_*a,c=d.tilePosition.y+_*(a/2);return d.tilePosition.x=m,d.tilePosition.y=c,{...f,x:m,y:c}})}}};function cn(n){let e;return{c(){e=D("div"),this.h()},l(t){e=S(t,"DIV",{style:!0}),C(e).forEach(h),this.h()},h(){fe(e,"width",n[0]+"px"),fe(e,"height",n[1]+"px")},m(t,l){O(t,e,l),n[4](e)},p(t,[l]){l&1&&fe(e,"width",t[0]+"px"),l&2&&fe(e,"height",t[1]+"px")},i:j,o:j,d(t){t&&h(e),n[4](null)}}}function fn(n,e,t){let{pixi:l}=e,{width:i}=e,{height:r}=e,a;const o=u=>{if(!a)return;const{firstChild:_}=a;if(_){if(u.app.view===_)return;if(a.childNodes.length>1)throw Error(`PixiView has ${a.childNodes.length} child nodes! Expected 0 or 1.`);a.removeChild(_)}a.appendChild(u.app.view)};Ye(()=>o(l)),Je(()=>a.removeChild(l.app.view));function s(u){Ne[u?"unshift":"push"](()=>{a=u,t(2,a)})}return n.$$set=u=>{"pixi"in u&&t(3,l=u.pixi),"width"in u&&t(0,i=u.width),"height"in u&&t(1,r=u.height)},n.$$.update=()=>{n.$$.dirty&11&&(i!==l.app.renderer.width||r!==l.app.renderer.height)&&l.app.renderer.resize(i,r),n.$$.dirty&8&&o(l)},[i,r,a,l,s]}class dn extends ge{constructor(e){super(),pe(this,e,fn,cn,he,{pixi:3,width:0,height:1})}}const mn={name:"unlock",slug:"unlock",showHomeButton:!1,Preview:ul};function hn(n){let e,t;return e=new wl({props:{width:320,height:160,animationDuration:"90s",running:n[0].running,text:"deep breath"}}),{c(){W(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,i){J(e,l,i),t=!0},p(l,[i]){const r={};i&1&&(r.running=l[0].running),e.$set(r)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function gn(n,e,t){let l;const i=zt();return G(n,i,r=>t(0,l=r)),[l,i]}class pn extends ge{constructor(e){super(),pe(this,e,gn,hn,he,{})}}const bn={name:"deep breath",slug:"deep-breath",showHomeButton:!1,Preview:pn},_t=[_l,cl,mn,fl,bn,dl,ml,hl,gl,pl,bl,vl,yl,kl],ut={portals:_t,portals_by_slug:new Map(_t.map(n=>[n.slug,n]))};const{window:vn}=Vt,yn=n=>({}),ct=n=>({close:n[7]});function ft(n){let e;const t=n[10].default,l=Fe(t,n,n[15],ct);return{c(){l&&l.c()},l(i){l&&l.l(i)},m(i,r){l&&l.m(i,r),e=!0},p(i,r){l&&l.p&&(!e||r&32768)&&Ge(l,t,i,i[15],e?We(t,i[15],r,yn):je(i[15]),ct)},i(i){e||(E(l,i),e=!0)},o(i){A(l,i),e=!1},d(i){l&&l.d(i)}}}function kn(n){let e,t,l,i,r,a,o,s,u,_=n[6]&&ft(n);return{c(){e=D("div"),t=D("div"),l=D("div"),i=D("div"),r=R(),a=D("div"),_&&_.c(),this.h()},l(f){e=S(f,"DIV",{class:!0,role:!0,"aria-modal":!0,tabindex:!0});var d=C(e);t=S(d,"DIV",{class:!0});var m=C(t);l=S(m,"DIV",{class:!0});var c=C(l);i=S(c,"DIV",{class:!0,role:!0}),C(i).forEach(h),r=U(c),a=S(c,"DIV",{class:!0,role:!0});var p=C(a);_&&_.l(p),p.forEach(h),c.forEach(h),m.forEach(h),d.forEach(h),this.h()},h(){g(i,"class","dialog_bg svelte-1u54ehg"),g(i,"role","none"),Z(i,"ready",n[6]),g(a,"class","dialog_content svelte-1u54ehg"),g(a,"role","none"),g(l,"class","dialog_wrapper svelte-1u54ehg"),g(t,"class","dialog_layout svelte-1u54ehg"),g(e,"class","dialog svelte-1u54ehg"),g(e,"role","dialog"),g(e,"aria-modal",""),g(e,"tabindex","-1"),Z(e,"ready",n[6]),Z(e,"layout-page",n[0]==="page"),fe(e,"z-index",100+n[1])},m(f,d){O(f,e,d),w(e,t),w(t,l),w(l,i),w(l,r),w(l,a),_&&_.m(a,null),n[11](a),n[13](e),o=!0,s||(u=[ae(i,"mousedown",n[7]),ae(a,"mousedown",n[12])],s=!0)},p(f,d){(!o||d&64)&&Z(i,"ready",f[6]),f[6]?_?(_.p(f,d),d&64&&E(_,1)):(_=ft(f),_.c(),E(_,1),_.m(a,null)):_&&(de(),A(_,1,1,()=>{_=null}),me()),(!o||d&64)&&Z(e,"ready",f[6]),(!o||d&1)&&Z(e,"layout-page",f[0]==="page"),d&2&&fe(e,"z-index",100+f[1])},i(f){o||(E(_),o=!0)},o(f){A(_),o=!1},d(f){f&&h(e),_&&_.d(),n[11](null),n[13](null),s=!1,Qe(u)}}}function wn(n){let e,t,l,i;return e=new Il({props:{to:n[3],$$slots:{default:[kn]},$$scope:{ctx:n}}}),e.$on("move",n[14]),{c(){W(e.$$.fragment)},l(r){Y(e.$$.fragment,r)},m(r,a){J(e,r,a),t=!0,l||(i=ae(vn,"keydown",function(){Ct(n[2]?n[8]:void 0)&&(n[2]?n[8]:void 0).apply(this,arguments)}),l=!0)},p(r,[a]){n=r;const o={};a&8&&(o.to=n[3]),a&32883&&(o.$$scope={dirty:a,ctx:n}),e.$set(o)},i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){A(e.$$.fragment,r),t=!1},d(r){Q(e,r),l=!1,i()}}}const dt="body",mt="dialog_open",ht="--dialog_open_padding_right",gt="dialog";function En(n,e,t){let{$$slots:l={},$$scope:i}=e;const r=He();let{container:a=void 0}=e,{layout:o="centered"}=e,{index:s=0}=e,{active:u=!0}=e,_;const f=v=>{if(v)t(3,_=v);else{const k=document.getElementById(gt);if(k)t(3,_=k);else{const B=document.querySelector(dt);if(!B)throw Error(`Cannot find dialog root element with selector '${dt}'`);t(3,_=document.createElement("div")),t(3,_.id=gt,_),t(3,_.style.display="contents",_),B.appendChild(_)}}};let d,m;const c=v=>{v&&ve(v),r("close")},p=v=>{var k;if(v.key==="Escape"&&!Zt(v.target)){const B=d.parentElement,L=(k=B==null?void 0:B.parentElement)==null?void 0:k.children,x=Array.prototype.indexOf.call(L,B);(!L||x===L.length-1||x===-1)&&c(v)}};let I=!1;Je(()=>{s===0&&(document.body.classList.remove(mt),document.body.style.setProperty(ht,null))});function z(v){Ne[v?"unshift":"push"](()=>{m=v,t(5,m)})}const ee=v=>{v.target===m&&c(v)};function V(v){Ne[v?"unshift":"push"](()=>{d=v,t(4,d)})}const M=()=>{const v=Number(window.getComputedStyle(document.body).getPropertyValue("padding-right").slice(0,-2))||0,k=document.body.clientWidth;document.body.classList.add(mt);const L=document.body.clientWidth-k;L>0&&document.body.style.setProperty(ht,L+v+"px"),t(6,I=!0),d.focus()};return n.$$set=v=>{"container"in v&&t(9,a=v.container),"layout"in v&&t(0,o=v.layout),"index"in v&&t(1,s=v.index),"active"in v&&t(2,u=v.active),"$$scope"in v&&t(15,i=v.$$scope)},n.$$.update=()=>{n.$$.dirty&512&&f(a)},[o,s,u,_,d,m,I,c,p,a,l,z,ee,V,M,i]}class Tn extends ge{constructor(e){super(),pe(this,e,En,wn,he,{container:9,layout:0,index:1,active:2})}}function pt(n){let e,t;return e=new Tn({props:{$$slots:{default:[In]},$$scope:{ctx:n}}}),e.$on("close",n[2]),{c(){W(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,i){J(e,l,i),t=!0},p(l,i){const r={};i&34&&(r.$$scope={dirty:i,ctx:l}),e.$set(r)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function In(n){let e;return{c(){e=D("div"),this.h()},l(t){e=S(t,"DIV",{class:!0}),C(e).forEach(h),this.h()},h(){g(e,"class","dialogs svelte-1ivh6wu")},m(t,l){O(t,e,l),n[3](e)},p:j,d(t){t&&h(e),n[3](null)}}}function Dn(n){let e,t,l=n[0]&&pt(n);return{c(){l&&l.c(),e=le()},l(i){l&&l.l(i),e=le()},m(i,r){l&&l.m(i,r),O(i,e,r),t=!0},p(i,[r]){i[0]?l?(l.p(i,r),r&1&&E(l,1)):(l=pt(i),l.c(),E(l,1),l.m(e.parentNode,e)):l&&(de(),A(l,1,1,()=>{l=null}),me())},i(i){t||(E(l),t=!0)},o(i){A(l),t=!1},d(i){i&&h(e),l&&l.d(i)}}}function Sn(n,e,t){let l,i;G(n,De,s=>t(0,l=s)),G(n,tt,s=>t(1,i=s));const r=zt(),a=()=>{ye(De,l=!1,l),r.resume()};function o(s){Ne[s?"unshift":"push"](()=>{i=s,tt.set(i)})}return[l,i,a,o]}class An extends ge{constructor(e){super(),pe(this,e,Sn,Dn,he,{})}}function On(n){let e,t,l=n[0]+1+"",i,r,a=n[1].name+"",o,s,u,_=n[1].author+"",f,d,m;return{c(){e=D("button"),t=D("div"),i=ne(l),r=R(),o=ne(a),s=R(),u=D("div"),f=ne(_),this.h()},l(c){e=S(c,"BUTTON",{type:!0,class:!0});var p=C(e);t=S(p,"DIV",{class:!0});var I=C(t);i=ie(I,l),I.forEach(h),r=U(p),o=ie(p,a),s=U(p),u=S(p,"DIV",{class:!0});var z=C(u);f=ie(z,_),z.forEach(h),p.forEach(h),this.h()},h(){g(t,"class","count svelte-16efu7a"),g(u,"class","author svelte-16efu7a"),g(e,"type","button"),g(e,"class","deselectable svelte-16efu7a"),Z(e,"selected",n[2])},m(c,p){O(c,e,p),w(e,t),w(t,i),w(e,r),w(e,o),w(e,s),w(e,u),w(u,f),d||(m=ae(e,"click",n[3]),d=!0)},p(c,[p]){p&1&&l!==(l=c[0]+1+"")&&Se(i,l),p&2&&a!==(a=c[1].name+"")&&Se(o,a),p&2&&_!==(_=c[1].author+"")&&Se(f,_),p&4&&Z(e,"selected",c[2])},i:j,o:j,d(c){c&&h(e),d=!1,m()}}}function Pn(n,e,t){let l,i,r;const a=He();let{playlist_item:o}=e,{index:s}=e,{playing_song:u}=e,{paused:_}=e;const f=async()=>{u&&r?(t(4,_=!_),a("paused",_)):a("play",o)};return n.$$set=d=>{"playlist_item"in d&&t(5,o=d.playlist_item),"index"in d&&t(0,s=d.index),"playing_song"in d&&t(6,u=d.playing_song),"paused"in d&&t(4,_=d.paused)},n.$$.update=()=>{n.$$.dirty&32&&t(1,{song:l}=o,l),n.$$.dirty&64&&t(7,i=u==null?void 0:u.song),n.$$.dirty&130&&t(2,r=i===l)},[s,l,r,f,_,o,u,i]}class Kt extends ge{constructor(e){super(),pe(this,e,Pn,On,he,{playlist_item:5,index:0,playing_song:6,paused:4})}}function bt(n,e,t){const l=n.slice();return l[11]=e[t],l[13]=t,l}function Nn(n){let e,t,l,i=[],r=new Map,a,o,s=lt(n[0]);const u=_=>_[11];for(let _=0;_<s.length;_+=1){let f=bt(n,s,_),d=u(f);r.set(d,i[_]=vt(d,f))}return{c(){e=D("div"),t=D("div"),l=D("ul");for(let _=0;_<i.length;_+=1)i[_].c();this.h()},l(_){e=S(_,"DIV",{class:!0});var f=C(e);t=S(f,"DIV",{class:!0});var d=C(t);l=S(d,"UL",{class:!0});var m=C(l);for(let c=0;c<i.length;c+=1)i[c].l(m);m.forEach(h),d.forEach(h),f.forEach(h),this.h()},h(){g(l,"class","svelte-vdrtfq"),g(t,"class","items-wrapper svelte-vdrtfq"),g(e,"class","playlist svelte-vdrtfq")},m(_,f){O(_,e,f),w(e,t),w(t,l);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(l,null);o=!0},p(_,f){f&13&&(s=lt(_[0]),de(),i=Nl(i,f,u,1,_,s,r,l,Cl,vt,null,bt),me())},i(_){if(!o){for(let f=0;f<s.length;f+=1)E(i[f]);_&&Re(()=>{o&&(a||(a=Oe(e,Pe,{},!0)),a.run(1))}),o=!0}},o(_){for(let f=0;f<i.length;f+=1)A(i[f]);_&&(a||(a=Oe(e,Pe,{},!1)),a.run(0)),o=!1},d(_){_&&h(e);for(let f=0;f<i.length;f+=1)i[f].d();_&&a&&a.end()}}}function Cn(n){let e,t,l=n[5]&&yt(n);return{c(){l&&l.c(),e=le()},l(i){l&&l.l(i),e=le()},m(i,r){l&&l.m(i,r),O(i,e,r),t=!0},p(i,r){i[5]?l?(l.p(i,r),r&32&&E(l,1)):(l=yt(i),l.c(),E(l,1),l.m(e.parentNode,e)):l&&(de(),A(l,1,1,()=>{l=null}),me())},i(i){t||(E(l),t=!0)},o(i){A(l),t=!1},d(i){i&&h(e),l&&l.d(i)}}}function vt(n,e){let t,l,i;return l=new Kt({props:{playlist_item:e[11],index:e[13],paused:e[2],playing_song:e[3]}}),l.$on("play",e[9]),l.$on("paused",e[10]),{key:n,first:null,c(){t=le(),W(l.$$.fragment),this.h()},l(r){t=le(),Y(l.$$.fragment,r),this.h()},h(){this.first=t},m(r,a){O(r,t,a),J(l,r,a),i=!0},p(r,a){e=r;const o={};a&1&&(o.playlist_item=e[11]),a&1&&(o.index=e[13]),a&4&&(o.paused=e[2]),a&8&&(o.playing_song=e[3]),l.$set(o)},i(r){i||(E(l.$$.fragment,r),i=!0)},o(r){A(l.$$.fragment,r),i=!1},d(r){r&&h(t),Q(l,r)}}}function yt(n){let e,t,l,i;return t=new Kt({props:{playlist_item:n[5],index:n[4],paused:n[2],playing_song:n[3]}}),t.$on("play",n[7]),t.$on("paused",n[8]),{c(){e=D("div"),W(t.$$.fragment),this.h()},l(r){e=S(r,"DIV",{class:!0});var a=C(e);Y(t.$$.fragment,a),a.forEach(h),this.h()},h(){g(e,"class","playlist svelte-vdrtfq")},m(r,a){O(r,e,a),J(t,e,null),i=!0},p(r,a){const o={};a&32&&(o.playlist_item=r[5]),a&16&&(o.index=r[4]),a&4&&(o.paused=r[2]),a&8&&(o.playing_song=r[3]),t.$set(o)},i(r){i||(E(t.$$.fragment,r),r&&Re(()=>{i&&(l||(l=Oe(e,Pe,{},!0)),l.run(1))}),i=!0)},o(r){A(t.$$.fragment,r),r&&(l||(l=Oe(e,Pe,{},!1)),l.run(0)),i=!1},d(r){r&&h(e),Q(t),r&&l&&l.end()}}}function Ln(n){let e,t,l,i;const r=[Cn,Nn],a=[];function o(s,u){return s[1]?0:1}return e=o(n),t=a[e]=r[e](n),{c(){t.c(),l=le()},l(s){t.l(s),l=le()},m(s,u){a[e].m(s,u),O(s,l,u),i=!0},p(s,[u]){let _=e;e=o(s),e===_?a[e].p(s,u):(de(),A(a[_],1,1,()=>{a[_]=null}),me(),t=a[e],t?t.p(s,u):(t=a[e]=r[e](s),t.c()),E(t,1),t.m(l.parentNode,l))},i(s){i||(E(t),i=!0)},o(s){A(t),i=!1},d(s){s&&h(l),a[e].d(s)}}}function zn(n,e,t){let l,i,r,{playlist_items:a}=e,{collapsed:o}=e,{paused:s}=e,{playing_song:u}=e;function _(c){ke.call(this,n,c)}function f(c){ke.call(this,n,c)}function d(c){ke.call(this,n,c)}function m(c){ke.call(this,n,c)}return n.$$set=c=>{"playlist_items"in c&&t(0,a=c.playlist_items),"collapsed"in c&&t(1,o=c.collapsed),"paused"in c&&t(2,s=c.paused),"playing_song"in c&&t(3,u=c.playing_song)},n.$$.update=()=>{n.$$.dirty&8&&t(6,l=u==null?void 0:u.song),n.$$.dirty&65&&t(4,i=a.findIndex(c=>c.song===l)),n.$$.dirty&17&&t(5,r=i===-1?null:a[i])},[a,o,s,u,i,r,l,_,f,d,m]}class Mn extends ge{constructor(e){super(),pe(this,e,zn,Ln,he,{playlist_items:0,collapsed:1,paused:2,playing_song:3})}}function kt(n){let e,t,l;function i(o,s){return o[1]?Hn:o[0]<.33?Bn:Vn}let r=i(n),a=r(n);return{c(){e=D("button"),a.c(),this.h()},l(o){e=S(o,"BUTTON",{class:!0});var s=C(e);a.l(s),s.forEach(h),this.h()},h(){g(e,"class","icon_button plain")},m(o,s){O(o,e,s),a.m(e,null),t||(l=ae(e,"click",n[3]),t=!0)},p(o,s){r!==(r=i(o))&&(a.d(1),a=r(o),a&&(a.c(),a.m(e,null)))},d(o){o&&h(e),a.d(),t=!1,l()}}}function Vn(n){let e;return{c(){e=ne("ðŸ”Š")},l(t){e=ie(t,"ðŸ”Š")},m(t,l){O(t,e,l)},d(t){t&&h(e)}}}function Bn(n){let e;return{c(){e=ne("ðŸ”‰")},l(t){e=ie(t,"ðŸ”‰")},m(t,l){O(t,e,l)},d(t){t&&h(e)}}}function Hn(n){let e;return{c(){e=ne("ðŸ”‡")},l(t){e=ie(t,"ðŸ”‡")},m(t,l){O(t,e,l)},d(t){t&&h(e)}}}function Rn(n){let e,t,l,i=Math.round(n[0]*100)+"",r,a,o="%",s,u,_,f,d=n[1]&&kt(n);return{c(){e=D("label"),d&&d.c(),t=R(),l=D("small"),r=ne(i),a=D("span"),a.textContent=o,s=R(),u=D("input"),this.h()},l(m){e=S(m,"LABEL",{title:!0,class:!0});var c=C(e);d&&d.l(c),t=U(c),l=S(c,"SMALL",{class:!0});var p=C(l);r=ie(p,i),a=S(p,"SPAN",{"data-svelte-h":!0}),Ve(a)!=="svelte-1bb94ef"&&(a.textContent=o),p.forEach(h),s=U(c),u=S(c,"INPUT",{class:!0,type:!0,step:!0,min:!0,max:!0}),c.forEach(h),this.h()},h(){g(l,"class","svelte-11zkzgy"),g(u,"class","plain"),g(u,"type","range"),g(u,"step",.01),g(u,"min",0),g(u,"max",1),u.value=n[0],g(e,"title","volume"),g(e,"class","svelte-11zkzgy"),Z(e,"muted",n[1])},m(m,c){O(m,e,c),d&&d.m(e,null),w(e,t),w(e,l),w(l,r),w(l,a),w(e,s),w(e,u),_||(f=ae(u,"input",n[4]),_=!0)},p(m,[c]){m[1]?d?d.p(m,c):(d=kt(m),d.c(),d.m(e,t)):d&&(d.d(1),d=null),c&1&&i!==(i=Math.round(m[0]*100)+"")&&Se(r,i),c&1&&(u.value=m[0]),c&2&&Z(e,"muted",m[1])},i:j,o:j,d(m){m&&h(e),d&&d.d(),_=!1,f()}}}function Un(n,e,t){const l=He();let{volume:i=1}=e,{muted:r=!1}=e;const a=()=>{t(1,r=!r),l("muted",r)},o=s=>{t(0,i=Number(s.currentTarget.value)),l("volume",i)};return n.$$set=s=>{"volume"in s&&t(0,i=s.volume),"muted"in s&&t(1,r=s.muted)},[i,r,l,a,o]}class Kn extends ge{constructor(e){super(),pe(this,e,Un,Rn,he,{volume:0,muted:1})}}function qn(n){let e;return{c(){e=ne("â¸")},l(t){e=ie(t,"â¸")},m(t,l){O(t,e,l)},d(t){t&&h(e)}}}function Fn(n){let e;return{c(){e=ne("âµ")},l(t){e=ie(t,"âµ")},m(t,l){O(t,e,l)},d(t){t&&h(e)}}}function Gn(n){let e,t,l=n[20](n[9]||0)+"",i,r,a=n[20](n[13])+"",o,s;return{c(){e=D("div"),t=D("span"),i=ne(l),r=D("span"),o=ne(a),this.h()},l(u){e=S(u,"DIV",{class:!0});var _=C(e);t=S(_,"SPAN",{});var f=C(t);i=ie(f,l),f.forEach(h),r=S(_,"SPAN",{});var d=C(r);o=ie(d,a),d.forEach(h),_.forEach(h),this.h()},h(){g(e,"class","box")},m(u,_){O(u,e,_),w(e,t),w(t,i),w(e,r),w(r,o)},p(u,_){_[0]&512&&l!==(l=u[20](u[9]||0)+"")&&Se(i,l),_[0]&8192&&a!==(a=u[20](u[13])+"")&&Se(o,a)},i(u){u&&(s||Re(()=>{s=Gt(e,Al,{}),s.start()}))},o:j,d(u){u&&h(e)}}}function jn(n){let e,t;return e=new Pl({}),{c(){W(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,i){J(e,l,i),t=!0},p:j,i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Wn(n){let e;return{c(){e=ne("âˆ’")},l(t){e=ie(t,"âˆ’")},m(t,l){O(t,e,l)},d(t){t&&h(e)}}}function Yn(n){let e;return{c(){e=ne("+")},l(t){e=ie(t,"+")},m(t,l){O(t,e,l)},d(t){t&&h(e)}}}function wt(n){let e,t,l,i,r,a,o;t=new Kn({props:{volume:n[6],muted:n[7]}}),t.$on("volume",n[29]),t.$on("muted",n[30]);let s=n[3]!==null&&Et(n),u=n[2]!==null&&Tt(n);return{c(){e=D("footer"),W(t.$$.fragment),l=R(),i=D("div"),s&&s.c(),r=R(),u&&u.c(),this.h()},l(_){e=S(_,"FOOTER",{class:!0});var f=C(e);Y(t.$$.fragment,f),l=U(f),i=S(f,"DIV",{class:!0});var d=C(i);s&&s.l(d),r=U(d),u&&u.l(d),d.forEach(h),f.forEach(h),this.h()},h(){g(i,"class","box row"),g(e,"class","svelte-19nvor2")},m(_,f){O(_,e,f),J(t,e,null),w(e,l),w(e,i),s&&s.m(i,null),w(i,r),u&&u.m(i,null),o=!0},p(_,f){const d={};f[0]&64&&(d.volume=_[6]),f[0]&128&&(d.muted=_[7]),t.$set(d),_[3]!==null?s?s.p(_,f):(s=Et(_),s.c(),s.m(i,r)):s&&(s.d(1),s=null),_[2]!==null?u?u.p(_,f):(u=Tt(_),u.c(),u.m(i,null)):u&&(u.d(1),u=null)},i(_){o||(E(t.$$.fragment,_),_&&Re(()=>{o&&(a||(a=Oe(e,Pe,{},!0)),a.run(1))}),o=!0)},o(_){A(t.$$.fragment,_),_&&(a||(a=Oe(e,Pe,{},!1)),a.run(0)),o=!1},d(_){_&&h(e),Q(t),s&&s.d(),u&&u.d(),_&&a&&a.end()}}}function Et(n){let e,t,l,i,r;return{c(){e=D("button"),t=ne("ðŸ”"),this.h()},l(a){e=S(a,"BUTTON",{type:!0,class:!0,title:!0});var o=C(e);t=ie(o,"ðŸ”"),o.forEach(h),this.h()},h(){g(e,"type","button"),g(e,"class","togglable icon_button plain deselectable svelte-19nvor2"),g(e,"title",l="repeat is "+(n[3]?"enabled":"disabled")),Z(e,"selected",n[3])},m(a,o){O(a,e,o),w(e,t),i||(r=ae(e,"click",n[31]),i=!0)},p(a,o){o[0]&8&&l!==(l="repeat is "+(a[3]?"enabled":"disabled"))&&g(e,"title",l),o[0]&8&&Z(e,"selected",a[3])},d(a){a&&h(e),i=!1,r()}}}function Tt(n){let e,t,l,i,r;return{c(){e=D("button"),t=ne("ðŸ”€"),this.h()},l(a){e=S(a,"BUTTON",{type:!0,class:!0,title:!0});var o=C(e);t=ie(o,"ðŸ”€"),o.forEach(h),this.h()},h(){g(e,"type","button"),g(e,"class","togglable icon_button plain deselectable svelte-19nvor2"),g(e,"title",l="shuffle is "+(n[2]?"enabled":"disabled")),Z(e,"selected",n[2])},m(a,o){O(a,e,o),w(e,t),i||(r=ae(e,"click",n[32]),i=!0)},p(a,o){o[0]&4&&l!==(l="shuffle is "+(a[2]?"enabled":"disabled"))&&g(e,"title",l),o[0]&4&&Z(e,"selected",a[2])},d(a){a&&h(e),i=!1,r()}}}function Jn(n){let e,t,l,i,r,a,o,s,u,_,f,d,m,c,p,I,z,ee="â®",V,M,v,k,B,L,x="â­",oe,X,q,re,T,ue,te,be,Ee;function Te(P,H){return P[10]?Fn:qn}let y=Te(n),F=y(n);const _e=[jn,Gn],$=[];function Ce(P,H){return P[11]==="pending"?0:P[13]!=null?1:-1}~(c=Ce(n))&&(p=$[c]=_e[c](n));function Le(P,H){return P[1]?Yn:Wn}let Ie=Le(n),ce=Ie(n);T=new Mn({props:{playlist_items:n[5],collapsed:n[1],paused:n[0],playing_song:n[4]}}),T.$on("play",n[27]),T.$on("paused",n[28]);let K=!n[1]&&wt(n);return{c(){e=D("div"),t=D("div"),l=D("header"),i=D("button"),F.c(),a=R(),o=D("label"),s=D("input"),d=R(),m=D("div"),p&&p.c(),I=R(),z=D("button"),z.textContent=ee,V=R(),M=D("button"),v=ne("â¹"),B=R(),L=D("button"),L.textContent=x,oe=R(),X=D("button"),ce.c(),re=R(),W(T.$$.fragment),ue=R(),K&&K.c(),this.h()},l(P){e=S(P,"DIV",{class:!0});var H=C(e);t=S(H,"DIV",{class:!0});var b=C(t);l=S(b,"HEADER",{class:!0});var N=C(l);i=S(N,"BUTTON",{title:!0,type:!0,class:!0});var se=C(i);F.l(se),se.forEach(h),a=U(N),o=S(N,"LABEL",{class:!0,title:!0});var ze=C(o);s=S(ze,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),d=U(ze),m=S(ze,"DIV",{class:!0});var xe=C(m);p&&p.l(xe),xe.forEach(h),ze.forEach(h),I=U(N),z=S(N,"BUTTON",{title:!0,type:!0,class:!0,"data-svelte-h":!0}),Ve(z)!=="svelte-1v0spi6"&&(z.textContent=ee),V=U(N),M=S(N,"BUTTON",{title:!0,type:!0,class:!0});var $e=C(M);v=ie($e,"â¹"),$e.forEach(h),B=U(N),L=S(N,"BUTTON",{title:!0,type:!0,class:!0,"data-svelte-h":!0}),Ve(L)!=="svelte-af82us"&&(L.textContent=x),oe=U(N),X=S(N,"BUTTON",{title:!0,type:!0,class:!0});var et=C(X);ce.l(et),et.forEach(h),N.forEach(h),re=U(b),Y(T.$$.fragment,b),ue=U(b),K&&K.l(b),b.forEach(h),H.forEach(h),this.h()},h(){g(i,"title",r=n[10]?"play":"pause"),g(i,"type","button"),g(i,"class","icon_button plain svelte-19nvor2"),s.disabled=u=n[13]==null,g(s,"class","plain"),g(s,"type","range"),g(s,"min",0),g(s,"max",_=n[13]??1),g(s,"step",.01),s.value=f=n[9]??0,fe(s,"flex","1"),g(m,"class","timestamp svelte-19nvor2"),g(o,"class","duration box row svelte-19nvor2"),g(o,"title","time"),g(z,"title","restart or previous"),g(z,"type","button"),g(z,"class","icon_button plain svelte-19nvor2"),g(M,"title","stop"),g(M,"type","button"),g(M,"class","icon_button plain svelte-19nvor2"),M.disabled=k=!n[8],g(L,"title","next"),g(L,"type","button"),g(L,"class","icon_button plain svelte-19nvor2"),g(X,"title",q=n[1]?"expand":"collapse"),g(X,"type","button"),g(X,"class","icon_button plain svelte-19nvor2"),g(l,"class","box row svelte-19nvor2"),g(t,"class","content svelte-19nvor2"),g(e,"class","media_player svelte-19nvor2")},m(P,H){O(P,e,H),w(e,t),w(t,l),w(l,i),F.m(i,null),w(l,a),w(l,o),w(o,s),w(o,d),w(o,m),~c&&$[c].m(m,null),w(l,I),w(l,z),w(l,V),w(l,M),w(M,v),w(l,B),w(l,L),w(l,oe),w(l,X),ce.m(X,null),w(t,re),J(T,t,null),w(t,ue),K&&K.m(t,null),te=!0,be||(Ee=[ae(i,"click",n[22]),ae(s,"input",n[19]),ae(z,"click",n[23]),ae(M,"click",n[24]),ae(L,"click",n[25]),ae(X,"click",n[26])],be=!0)},p(P,H){y!==(y=Te(P))&&(F.d(1),F=y(P),F&&(F.c(),F.m(i,null))),(!te||H[0]&1024&&r!==(r=P[10]?"play":"pause"))&&g(i,"title",r),(!te||H[0]&8192&&u!==(u=P[13]==null))&&(s.disabled=u),(!te||H[0]&8192&&_!==(_=P[13]??1))&&g(s,"max",_),(!te||H[0]&512&&f!==(f=P[9]??0))&&(s.value=f);let b=c;c=Ce(P),c===b?~c&&$[c].p(P,H):(p&&(de(),A($[b],1,1,()=>{$[b]=null}),me()),~c?(p=$[c],p?p.p(P,H):(p=$[c]=_e[c](P),p.c()),E(p,1),p.m(m,null)):p=null),(!te||H[0]&256&&k!==(k=!P[8]))&&(M.disabled=k),Ie!==(Ie=Le(P))&&(ce.d(1),ce=Ie(P),ce&&(ce.c(),ce.m(X,null))),(!te||H[0]&2&&q!==(q=P[1]?"expand":"collapse"))&&g(X,"title",q);const N={};H[0]&32&&(N.playlist_items=P[5]),H[0]&2&&(N.collapsed=P[1]),H[0]&1&&(N.paused=P[0]),H[0]&16&&(N.playing_song=P[4]),T.$set(N),P[1]?K&&(de(),A(K,1,1,()=>{K=null}),me()):K?(K.p(P,H),H[0]&2&&E(K,1)):(K=wt(P),K.c(),E(K,1),K.m(t,null))},i(P){te||(E(p),E(T.$$.fragment,P),E(K),te=!0)},o(P){A(p),A(T.$$.fragment,P),A(K),te=!1},d(P){P&&h(e),F.d(),~c&&$[c].d(),ce.d(),Q(T),K&&K.d(),be=!1,Qe(Ee)}}}const Qn=.29;function Xn(n,e,t){let l,i,r,a,o,s,u,_=j,f=()=>(_(),_=Me(a,b=>t(21,u=b)),a);n.$$.on_destroy.push(()=>_());const d=He();let{playing_song:m}=e,{playlist_items:c}=e,{collapsed:p=!1}=e,{paused:I=!1}=e,{volume:z=1}=e,{muted:ee=!1}=e,{shuffle:V=!1}=e,{repeat:M=!1}=e,v=null,k=null;const B=async b=>{if(!b||(v=b,!b.ended||b.ended===k)||(k=b.ended,await b.ended,k!==b.ended))return;const N=M?c.find(se=>se.song===b.song):re();N&&d("play",N)},L=()=>{if(l)t(0,I=!I),d("paused",I);else{const b=v||re();b&&d("play",b)}},x=()=>{d("stop")},oe=async()=>{const b=r||(v==null?void 0:v.audio_el);if(!b||b.currentTime<Qn){const N=q();N&&d("play",N)}else b.currentTime=0},X=async()=>{const b=re();b&&d("play",b)},q=()=>{if(c.length<=1)return c[0];if(V)return T(m||v);const b=m?c.findIndex(se=>se.song===m.song):v?c.findIndex(se=>se.song===v.song):1,N=b===0?c.length-1:b-1;return c[N]},re=()=>{if(c.length<=1)return c[0];if(V)return T(m||v);const b=m?c.findIndex(se=>se.song===m.song):v?c.findIndex(se=>se.song===v.song):c.length-1,N=b===c.length-1?0:b+1;return c[N]},T=b=>{if(c.length===0)return;if(c.length===1)return c[0];let N;do N=Ol(c);while(N===b);return N};let ue,te;const be=()=>{t(9,ue=r==null?void 0:r.currentTime),te=requestAnimationFrame(be)};Ye(()=>{be()}),Je(()=>{cancelAnimationFrame(te)});const Ee=b=>{ve(b);const N=Number(b.currentTarget.value);Number.isNaN(N)||r&&(r.currentTime=N)},Te=b=>{const N=b/60|0,se=(b|0)%60;return N+":"+(se<10?"0":"")+se},y=()=>L(),F=()=>oe(),_e=()=>x(),$=()=>X(),Ce=()=>t(1,p=!p);function Le(b){ke.call(this,n,b)}function Ie(b){ke.call(this,n,b)}function ce(b){ke.call(this,n,b)}function K(b){ke.call(this,n,b)}const P=()=>{t(3,M=!M),d("repeat",M)},H=()=>{t(2,V=!V),d("shuffle",V)};return n.$$set=b=>{"playing_song"in b&&t(4,m=b.playing_song),"playlist_items"in b&&t(5,c=b.playlist_items),"collapsed"in b&&t(1,p=b.collapsed),"paused"in b&&t(0,I=b.paused),"volume"in b&&t(6,z=b.volume),"muted"in b&&t(7,ee=b.muted),"shuffle"in b&&t(2,V=b.shuffle),"repeat"in b&&t(3,M=b.repeat)},n.$$.update=()=>{n.$$.dirty[0]&16&&console.log("[MediaPlayer playing_song]",m,m==null?void 0:m.audio_el),n.$$.dirty[0]&16&&t(8,l=!!m),n.$$.dirty[0]&16&&t(13,i=m==null?void 0:m.duration),n.$$.dirty[0]&16&&(r=m==null?void 0:m.audio_el),n.$$.dirty[0]&16&&f(t(12,a=m==null?void 0:m.audio)),n.$$.dirty[0]&2097152&&t(11,o=u==null?void 0:u.status),n.$$.dirty[0]&16&&m&&B(m),n.$$.dirty[0]&257&&t(10,s=!l||I)},[I,p,V,M,m,c,z,ee,l,ue,s,o,a,i,d,L,x,oe,X,Ee,Te,u,y,F,_e,$,Ce,Le,Ie,ce,K,P,H]}class Zn extends ge{constructor(e){super(),pe(this,e,Xn,Jn,he,{playing_song:4,playlist_items:5,collapsed:1,paused:0,volume:6,muted:7,shuffle:2,repeat:3},null,[-1,-1])}}function It(n){let e,t,l;return t=new Xe({props:{$$slots:{default:[$n]},$$scope:{ctx:n}}}),{c(){e=D("div"),W(t.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var r=C(e);Y(t.$$.fragment,r),r.forEach(h),this.h()},h(){g(e,"class","prose box")},m(i,r){O(i,e,r),J(t,e,null),l=!0},i(i){l||(E(t.$$.fragment,i),l=!0)},o(i){A(t.$$.fragment,i),l=!1},d(i){i&&h(e),Q(t)}}}function xn(n){let e;return{c(){e=ne("ðŸŒ ")},l(t){e=ie(t,"ðŸŒ ")},m(t,l){O(t,e,l)},d(t){t&&h(e)}}}function $n(n){let e,t;return e=new Sl({props:{$$slots:{default:[xn]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,i){J(e,l,i),t=!0},p(l,i){const r={};i&524288&&(r.$$scope={dirty:i,ctx:l}),e.$set(r)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function ei(n){let e,t,l;function i(a){n[11](a)}let r={playing_song:n[2],playlist_items:n[8],volume:n[3],muted:n[4],paused:n[5],shuffle:n[6],repeat:n[7]};return n[0]!==void 0&&(r.collapsed=n[0]),e=new Zn({props:r}),Ne.push(()=>jt(e,"collapsed",i)),e.$on("play",n[12]),e.$on("stop",n[13]),e.$on("paused",n[14]),e.$on("volume",n[15]),e.$on("muted",n[16]),e.$on("shuffle",n[17]),e.$on("repeat",n[18]),{c(){W(e.$$.fragment)},l(a){Y(e.$$.fragment,a)},m(a,o){J(e,a,o),l=!0},p(a,o){const s={};o&4&&(s.playing_song=a[2]),o&8&&(s.volume=a[3]),o&16&&(s.muted=a[4]),o&32&&(s.paused=a[5]),o&64&&(s.shuffle=a[6]),o&128&&(s.repeat=a[7]),!t&&o&1&&(t=!0,s.collapsed=a[0],qt(()=>t=!1)),e.$set(s)},i(a){l||(E(e.$$.fragment,a),l=!0)},o(a){A(e.$$.fragment,a),l=!1},d(a){Q(e,a)}}}function ti(n){let e,t,l,i,r=n[1].url.pathname!=="/"&&It(n);return l=new Xe({props:{$$slots:{default:[ei]},$$scope:{ctx:n}}}),{c(){e=D("div"),r&&r.c(),t=R(),W(l.$$.fragment)},l(a){e=S(a,"DIV",{});var o=C(e);r&&r.l(o),t=U(o),Y(l.$$.fragment,o),o.forEach(h)},m(a,o){O(a,e,o),r&&r.m(e,null),w(e,t),J(l,e,null),i=!0},p(a,[o]){a[1].url.pathname!=="/"?r?o&2&&E(r,1):(r=It(a),r.c(),E(r,1),r.m(e,t)):r&&(de(),A(r,1,1,()=>{r=null}),me());const s={};o&524541&&(s.$$scope={dirty:o,ctx:a}),l.$set(s)},i(a){i||(E(r),E(l.$$.fragment,a),i=!0)},o(a){A(r),A(l.$$.fragment,a),i=!1},d(a){a&&h(e),r&&r.d(),Q(l)}}}const Dt="media_player_collapsed",li=!1;function ni(n,e,t){let l,i,r,a,o,s,u;G(n,Lt,k=>t(1,l=k)),G(n,Mt,k=>t(2,i=k)),G(n,Be,k=>t(3,r=k)),G(n,qe,k=>t(4,a=k)),G(n,Vl,k=>t(5,o=k)),G(n,nt,k=>t(6,s=k)),G(n,it,k=>t(7,u=k));const _=Array.from(Ll.values()).map(k=>({song:k}));let f=zl(Dt,li),d=f;const m=async k=>{const{song:B}=k;await Bl(B)};function c(k){f=k,t(0,f)}const p=k=>m(k.detail),I=()=>Hl(i),z=k=>k.detail?Rl(i):Ul(i),ee=k=>ye(Be,r=k.detail,r),V=k=>ye(qe,a=k.detail,a),M=k=>ye(nt,s=k.detail,s),v=k=>ye(it,u=k.detail,u);return n.$$.update=()=>{n.$$.dirty&1025&&d!==f&&(t(10,d=f),Ml(Dt,f))},[f,l,i,r,a,o,s,u,_,m,d,c,p,I,z,ee,V,M,v]}class ii extends ge{constructor(e){super(),pe(this,e,ni,ti,he,{})}}const{window:Ke}=Vt;function ai(n){let e,t;return e=new Xe({props:{$$slots:{default:[oi]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,i){J(e,l,i),t=!0},p(l,i){const r={};i&67108864&&(r.$$scope={dirty:i,ctx:l}),e.$set(r)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function ri(n){return{c:j,l:j,m:j,p:j,i:j,o:j,d:j}}function si(n){let e,t,l,i;const r=[ui,_i],a=[];function o(s,u){return s[5]!=="success"?0:1}return e=o(n),t=a[e]=r[e](n),{c(){t.c(),l=le()},l(s){t.l(s),l=le()},m(s,u){a[e].m(s,u),O(s,l,u),i=!0},p(s,u){let _=e;e=o(s),e===_?a[e].p(s,u):(de(),A(a[_],1,1,()=>{a[_]=null}),me(),t=a[e],t?t.p(s,u):(t=a[e]=r[e](s),t.c()),E(t,1),t.m(l.parentNode,l))},i(s){i||(E(t),i=!0)},o(s){A(t),i=!1},d(s){s&&h(l),a[e].d(s)}}}function oi(n){let e,t=`<h1>oh no :(</h1> <p>It looks like your browser doesn&#39;t support WebGL, and sadly this website requires it. I&#39;m
					sorry, please try another browser or device if you can. (or enable it?)</p> <p>source code is at <a href="https://github.com/ryanatkn/cosmicplayground">github.com/ryanatkn/cosmicplayground</a></p>`;return{c(){e=D("div"),e.innerHTML=t,this.h()},l(l){e=S(l,"DIV",{class:!0,"data-svelte-h":!0}),Ve(e)!=="svelte-1mym6na"&&(e.innerHTML=t),this.h()},h(){g(e,"class","prose")},m(l,i){O(l,e,i)},p:j,d(l){l&&h(e)}}}function _i(n){let e,t,l,i,r,a,o,s,u,_;t=new dn({props:{pixi:n[11],width:n[3].width,height:n[3].height}});let f=(!n[9].selected_portal||n[9].selected_portal.showHomeButton)&&St(n);const d=n[24].default,m=Fe(d,n,n[26],null);return o=new An({}),u=new Dl({props:{$$slots:{default:[fi]},$$scope:{ctx:n}}}),{c(){e=D("div"),W(t.$$.fragment),l=R(),i=D("main"),f&&f.c(),r=R(),m&&m.c(),a=R(),W(o.$$.fragment),s=R(),W(u.$$.fragment),this.h()},l(c){e=S(c,"DIV",{class:!0,style:!0});var p=C(e);Y(t.$$.fragment,p),p.forEach(h),l=U(c),i=S(c,"MAIN",{class:!0});var I=C(i);f&&f.l(I),r=U(I),m&&m.l(I),I.forEach(h),a=U(c),Y(o.$$.fragment,c),s=U(c),Y(u.$$.fragment,c),this.h()},h(){g(e,"class","pixi-wrapper fade-in svelte-y6kwh3"),fe(e,"width",n[3].width+"px"),fe(e,"height",n[3].height+"px"),g(i,"class","fade-in svelte-y6kwh3"),Z(i,"paused",!n[2].running),Z(i,"secret",n[1].secretEnabled),Z(i,"idle",n[8]||n[1].idle_mode)},m(c,p){O(c,e,p),J(t,e,null),O(c,l,p),O(c,i,p),f&&f.m(i,null),w(i,r),m&&m.m(i,null),O(c,a,p),J(o,c,p),O(c,s,p),J(u,c,p),_=!0},p(c,p){const I={};p&8&&(I.width=c[3].width),p&8&&(I.height=c[3].height),t.$set(I),(!_||p&8)&&fe(e,"width",c[3].width+"px"),(!_||p&8)&&fe(e,"height",c[3].height+"px"),!c[9].selected_portal||c[9].selected_portal.showHomeButton?f?p&512&&E(f,1):(f=St(c),f.c(),E(f,1),f.m(i,r)):f&&(de(),A(f,1,1,()=>{f=null}),me()),m&&m.p&&(!_||p&67108864)&&Ge(m,d,c,c[26],_?We(d,c[26],p,null):je(c[26]),null),(!_||p&4)&&Z(i,"paused",!c[2].running),(!_||p&2)&&Z(i,"secret",c[1].secretEnabled),(!_||p&258)&&Z(i,"idle",c[8]||c[1].idle_mode);const z={};p&67108864&&(z.$$scope={dirty:p,ctx:c}),u.$set(z)},i(c){_||(E(t.$$.fragment,c),E(f),E(m,c),E(o.$$.fragment,c),E(u.$$.fragment,c),_=!0)},o(c){A(t.$$.fragment,c),A(f),A(m,c),A(o.$$.fragment,c),A(u.$$.fragment,c),_=!1},d(c){c&&(h(e),h(l),h(i),h(a),h(s)),Q(t),f&&f.d(),m&&m.d(c),Q(o,c),Q(u,c)}}}function ui(n){let e,t;return e=new El({props:{status:n[5]}}),{c(){W(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,i){J(e,l,i),t=!0},p(l,i){const r={};i&32&&(r.status=l[5]),e.$set(r)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function St(n){let e,t;return e=new Qt({props:{$$slots:{default:[ci]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,i){J(e,l,i),t=!0},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function ci(n){let e,t;return e=new Xt({}),{c(){W(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,i){J(e,l,i),t=!0},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function fi(n){let e,t;return e=new ii({}),{c(){W(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,i){J(e,l,i),t=!0},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function di(n){let e,t,l,i;const r=[si,ri,ai],a=[];function o(s,u){return s[4]?0:s[4]===null?1:2}return e=o(n),t=a[e]=r[e](n),{c(){t.c(),l=le()},l(s){t.l(s),l=le()},m(s,u){a[e].m(s,u),O(s,l,u),i=!0},p(s,u){let _=e;e=o(s),e===_?a[e].p(s,u):(de(),A(a[_],1,1,()=>{a[_]=null}),me(),t=a[e],t?t.p(s,u):(t=a[e]=r[e](s),t.c()),E(t,1),t.m(l.parentNode,l))},i(s){i||(E(t),i=!0)},o(s){A(t),i=!1},d(s){s&&h(l),a[e].d(s)}}}function mi(n){let e,t,l,i,r,a;return l=new on({props:{selected_color_scheme:n[10],color_scheme_fallback:n[7],$$slots:{default:[di]},$$scope:{ctx:n}}}),{c(){t=R(),W(l.$$.fragment),this.h()},l(o){Ot("svelte-12e3mlr",document.head).forEach(h),t=U(o),Y(l.$$.fragment,o),this.h()},h(){document.title="cosmicplayground"},m(o,s){O(o,t,s),J(l,o,s),i=!0,r||(a=[Ft(e=il.call(null,Ke,{idle:n[16],time_to_go_idle:n[6],idle_interval_time:1e3})),ae(Ke,"resize",n[25]),ae(Ke,"keydown",n[17])],r=!0)},p(o,[s]){e&&Ct(e.update)&&s&64&&e.update.call(null,{idle:o[16],time_to_go_idle:o[6],idle_interval_time:1e3});const u={};s&128&&(u.color_scheme_fallback=o[7]),s&67109694&&(u.$$scope={dirty:s,ctx:o}),l.$set(u)},i(o){i||(E(l.$$.fragment,o),i=!0)},o(o){A(l.$$.fragment,o),i=!1},d(o){o&&h(t),Q(l,o),r=!1,Qe(a)}}}function hi(n,e,t){let l,i,r,a,o,s,u,_,f,d,m,c=j,p=()=>(c(),c=Me(q,y=>t(28,m=y)),q),I,z,ee,V;G(n,Lt,y=>t(20,o=y)),G(n,De,y=>t(27,s=y)),G(n,Be,y=>t(21,_=y)),G(n,qe,y=>t(22,f=y)),G(n,Mt,y=>t(23,d=y)),n.$$.on_destroy.push(()=>c());let{$$slots:M={},$$scope:v}=e;const k=Ae("dark");G(n,k,y=>t(7,z=y)),Rt(z),Yt(()=>{ye(De,s=!1,s)});let B=null;const L=new tl;console.log("pixi",L);const x=nl();G(n,x,y=>t(2,u=y));const oe=Kl(Ae({width:window.innerWidth,height:window.innerHeight}));G(n,oe,y=>t(3,I=y)),el(L);const X=ll+"/assets/space/galaxies.jpg";let q,re="initial";Ye(async()=>{const y=T();y&&await y,t(5,re="pending");try{L.init({width:I.width,height:I.height,sharedTicker:!0}),t(4,B=!0)}catch(_e){console.error("failed to create PixiApp",_e),t(4,B=!1),console.error(_e)}const F=await xt.load(X);p(t(0,q=un(F,I.width,I.height))),L.default_scene.addChild(m.sprite),t(5,re="success")});const T=()=>{const{hash:y}=window.location;if(y)return window.location.hash="",Ue("/"+y.substring(1),{replaceState:!0})},ue=rl({audio_enabled:!0,dev_mode:!1,recording_mode:!1,idle_mode:!1,time_to_go_idle:6e3});G(n,ue,y=>t(1,a=y)),x.resume();const te=sl({data:ut,selected_portal:ut.portals_by_slug.get(o.url.pathname.substring(1))||null});G(n,te,y=>t(9,V=y)),ol(te);const be=Ae(!1);G(n,be,y=>t(8,ee=y)),al(be),Tl();const Ee=async y=>{const{key:F,target:_e}=y;console.log("key",F),F==="`"&&!y.ctrlKey&&we(_e)?(ve(y),x.toggle()):F==="`"&&y.ctrlKey&&we(_e)?(ve(y),ue.update($=>({...$,dev_mode:!$.dev_mode}))):F==="Escape"&&!y.shiftKey&&we(y.currentTarget)?(ve(y),s?(ye(De,s=!1,s),x.resume()):(ye(De,s=!0,s),x.pause())):F==="Escape"&&y.shiftKey&&we(_e)?(ve(y),await Ue(o.url.pathname.split("/").slice(0,-1).join("/")||"/")):y.key==="!"&&y.ctrlKey&&we(_e)?o.url.pathname!=="/unlock/atlas"&&(ve(y),await Ue("/unlock/atlas")):F==="-"&&!y.ctrlKey&&we(_e)?(ve(y),ue.update($=>({...$,idle_mode:!$.idle_mode})),console.log("idle mode is now",a.idle_mode)):F==="="&&!y.ctrlKey&&we(_e)&&(ve(y),ue.update($=>({...$,recording_mode:!$.recording_mode})),console.log("recording mode is now",a.recording_mode))},Te=()=>ye(oe,I={width:window.innerWidth,height:window.innerHeight},I);return n.$$set=y=>{"$$scope"in y&&t(26,v=y.$$scope)},n.$$.update=()=>{n.$$.dirty&8&&console.log("$dimensions",I),n.$$.dirty&9&&(q==null||q.update_dimensions(I.width,I.height)),n.$$.dirty&5&&(q==null||q.tick(u.dt)),n.$$.dirty&8388608&&t(19,l=d==null?void 0:d.audio_el),n.$$.dirty&6815744&&l&&t(19,l.volume=f?0:_,l),n.$$.dirty&6815744&&l&&t(19,l.volume=f?0:Be?_:1,l),n.$$.dirty&4&&Jt(u.dt),n.$$.dirty&1048576&&t(18,i=o.url.pathname.substring(1).split("/")[0]),n.$$.dirty&262144&&te.select(i),n.$$.dirty&2&&t(6,r=a.dev_mode?99999999999:a.recording_mode?500:a.time_to_go_idle)},[q,a,u,I,B,re,r,z,ee,V,k,L,x,oe,ue,te,be,Ee,i,l,o,_,f,d,M,Te,v]}class Yi extends ge{constructor(e){super(),pe(this,e,hi,mi,he,{})}}export{Yi as component,Wi as universal};
