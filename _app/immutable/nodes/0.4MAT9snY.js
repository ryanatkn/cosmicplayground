import{h as Dt,n as he,T as Fe,r as le,s as V,am as At,d as h,c as B,o as E,i as A,U as Ge,V as We,W as Ye,H as Ot,z as Nt,e as P,b as D,l as C,m as g,a as X,E as Me,p as fe,a4 as Je,M as Xe,G as Ne,L as J,J as ae,F as Ct,a6 as Re,I as Q,C as Ze,P as ve,x as ne,y as ie,A as Pe,Z as ke,a0 as Ue,g as Ve,K as qt,$ as Ft}from"../chunks/scheduler.0wHob__M.js";import{S as ge,i as pe,t as w,b as I,c as K,a as j,m as q,d as F,g as me,e as de,h as Ae,j as Gt,f as Wt}from"../chunks/index.5fTbtE3D.js";import{w as De}from"../chunks/index.c0wBgp3C.js";import{p as Lt}from"../chunks/stores.l80RJDvR.js";import{b as Yt,g as Ke}from"../chunks/entry.ccivgeDb.js";import{s as ye}from"../chunks/dom.z-RU6ZBL.js";import{A as Jt}from"../chunks/WaitingAnimation.ex4X_spT.js";import{S as Xt,s as Zt,l as Qt}from"../chunks/pixi.bwGvo_cj.js";import{b as zt}from"../chunks/paths.YKIxcYXz.js";import{g as Mt,s as $t}from"../chunks/clock.Sr0a0M49.js";import{e as we}from"../chunks/dom.LE2hs0yM.js";import{t as xt,s as el}from"../chunks/idle.RITxdxfH.js";import{T as tl,u as ll,H as nl,a as il}from"../chunks/renderStats.d3SVKfY7.js";import{P as Be}from"../chunks/Panel.gv325ouo.js";import{s as al}from"../chunks/settings.Fk3TQKDX.js";import{c as rl,s as sl}from"../chunks/portals.XwABkFTa.js";import{d as ol}from"../chunks/data.Xutj9Krx.js";import{n as _l,g as ul,o as cl,p as fl,q as ml,s as dl,t as hl,u as gl,v as pl,h as bl,i as vl,j as yl}from"../chunks/data.2vUU3EHv.js";import{E as kl}from"../chunks/EarthThumbnail.6SGCY8jm.js";import{W as wl}from"../chunks/WaitingScreen.b0a-STEv.js";import{s as El}from"../chunks/audio_ctx.jwj0MRP8.js";import{T as Tl,s as Se,a as tt,A as Il}from"../chunks/AppDialog.ByY_cqjc.js";import{B as Sl}from"../chunks/Breadcrumb.idWIznJ_.js";import{a as Oe,f as Pl}from"../chunks/index.SiiQPnVm.js";import{r as Dl}from"../chunks/random.oPe0JuqT.js";import{P as Al}from"../chunks/Pending_Animation.uJc6tVl8.js";import{e as lt,u as Ol,o as Nl}from"../chunks/each.YfpP0LeT.js";import{s as Cl}from"../chunks/songs.yGDTKcrp.js";import{l as Ll,s as zl}from"../chunks/storage.nJRkxBE0.js";import{b as Vt,v as He,m as qe,c as Ml,s as nt,r as it,a as Vl,d as Bl,e as Hl,f as Rl}from"../chunks/play_song.q1pb8oSn.js";import{P as Ul}from"../chunks/PortalPreview.UXvREe28.js";import{P as Kl}from"../chunks/Preview.XycVFnSx.js";import{s as jl}from"../chunks/dimensions.WJ8pRZoj.js";const Bt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,ql=!0,Fl=!1,ea=Object.freeze(Object.defineProperty({__proto__:null,prerender:ql,ssr:Fl},Symbol.toStringTag,{value:"Module"})),Gl=[{name:"hue_1",light:"210",summary:"blue"},{name:"color_1",light:"hsl(var(--hue_1), 55%, 50%)",dark:"hsl(var(--hue_1), 55%, 75%)"},{name:"hue_2",light:"120",summary:"green, triad with `--color_3` and `--color_4`"},{name:"color_2",light:"hsl(var(--hue_2), 55%, 32%)",dark:"hsl(var(--hue_2), 45%, 70%)",summary:"same as THEME_COLOR"},{name:"hue_3",light:"251",summary:"purple, triad with `--color_2` and `--color_4`"},{name:"color_3",light:"hsl(var(--hue_3), 50%, 50%)",dark:"hsl(var(--hue_3), 50%, 75%)"},{name:"hue_4",light:"26",summary:"orange, triad with `--color_2` and `--color_3`"},{name:"color_4",light:"hsl(var(--hue_4), 55%, 50%)",dark:"hsl(var(--hue_4), 65%, 75%)"},{name:"hue_5",light:"0",summary:"red"},{name:"color_5",light:"hsl(var(--hue_5), 50%, 50%)",dark:"hsl(var(--hue_5), 50%, 65%)"},{name:"hue_6",light:"32",summary:"brown"},{name:"color_6",light:"hsl(var(--hue_6), 97%, 22%)",dark:"hsl(var(--hue_6), 32%, 75%)"},{name:"hue_7",light:"335",summary:"pink"},{name:"color_7",light:"hsl(var(--hue_7), 74%, 56%)",dark:"hsl(var(--hue_7), 74%, 76%)"},{name:"darken_1",light:"#0000000f",summary:"6%"},{name:"darken_2",light:"#0000001f",summary:"12%"},{name:"darken_3",light:"#00000036",summary:"21%"},{name:"darken_4",light:"#00000052",summary:"32%"},{name:"darken_5",light:"#00000073",summary:"45%"},{name:"darken_6",light:"#000000a6",summary:"65%"},{name:"darken_7",light:"#000000cc",summary:"80%"},{name:"darken_8",light:"#000000e3",summary:"89%"},{name:"darken_9",light:"#000000f5",summary:"96%"},{name:"lighten_1",light:"#ffffff0f",summary:"6%"},{name:"lighten_2",light:"#ffffff1f",summary:"12%"},{name:"lighten_3",light:"#ffffff36",summary:"21%"},{name:"lighten_4",light:"#ffffff52",summary:"32%"},{name:"lighten_5",light:"#ffffff73",summary:"45%"},{name:"lighten_6",light:"#ffffffa6",summary:"65%"},{name:"lighten_7",light:"#ffffffcc",summary:"80%"},{name:"lighten_8",light:"#ffffffe3",summary:"89%"},{name:"lighten_9",light:"#fffffff5",summary:"96%"},{name:"tint_hue",light:"var(--hue_4)"},{name:"tint_saturation",light:"11%"},{name:"bg",light:"hsl(var(--tint_hue), var(--tint_saturation), 96%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 7%)"},{name:"fg",light:"hsl(var(--tint_hue), var(--tint_saturation), 7%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 96%)"},{name:"bg_1",light:"var(--lighten_1)",dark:"var(--darken_1)"},{name:"bg_2",light:"var(--lighten_2)",dark:"var(--darken_2)"},{name:"bg_3",light:"var(--lighten_3)",dark:"var(--darken_3)"},{name:"bg_4",light:"var(--lighten_4)",dark:"var(--darken_4)"},{name:"bg_5",light:"var(--lighten_5)",dark:"var(--darken_5)"},{name:"bg_6",light:"var(--lighten_6)",dark:"var(--darken_6)"},{name:"bg_7",light:"var(--lighten_7)",dark:"var(--darken_7)"},{name:"bg_8",light:"var(--lighten_8)",dark:"var(--darken_8)"},{name:"bg_9",light:"var(--lighten_9)",dark:"var(--darken_9)"},{name:"fg_1",light:"var(--darken_1)",dark:"var(--lighten_1)"},{name:"fg_2",light:"var(--darken_2)",dark:"var(--lighten_2)"},{name:"fg_3",light:"var(--darken_3)",dark:"var(--lighten_3)"},{name:"fg_4",light:"var(--darken_4)",dark:"var(--lighten_4)"},{name:"fg_5",light:"var(--darken_5)",dark:"var(--lighten_5)"},{name:"fg_6",light:"var(--darken_6)",dark:"var(--lighten_6)"},{name:"fg_7",light:"var(--darken_7)",dark:"var(--lighten_7)"},{name:"fg_8",light:"var(--darken_8)",dark:"var(--lighten_8)"},{name:"fg_9",light:"var(--darken_9)",dark:"var(--lighten_9)"},{name:"text_color",light:"var(--text_1)"},{name:"text_1",light:"hsl(var(--tint_hue), var(--tint_saturation), 16%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 80%)"},{name:"text_2",light:"hsl(var(--tint_hue), var(--tint_saturation), 32%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 65%)"},{name:"text_3",light:"hsl(var(--tint_hue), var(--tint_saturation), 48%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 50%)"},{name:"text_disabled",light:"var(--text_3)"},{name:"text_active",light:"hsl(var(--hue_1), 55%, 40%);",dark:"hsl(var(--hue_1), 65%, 65%);"},{name:"line_height",light:"var(--line_height_5)"},{name:"line_height_1",light:"1"},{name:"line_height_2",light:"1.1"},{name:"line_height_3",light:"1.2"},{name:"line_height_4",light:"1.35"},{name:"line_height_5",light:"1.5"},{name:"line_height_6",light:"1.75"},{name:"line_height_7",light:"2"},{name:"font_family",light:"system-ui, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'",summary:"@source https://kilianvalkhof.com/2022/css-html/your-css-reset-needs-text-size-adjust-probably/"},{name:"font_family_mono",light:"ui-monospace, 'Fira Mono', monospace"},{name:"size_xs",light:"1rem"},{name:"size_sm",light:"1.3rem"},{name:"size_md",light:"1.6rem"},{name:"size_lg",light:"2.04rem"},{name:"size_1",light:"2.59rem"},{name:"size_2",light:"3.29rem"},{name:"size_3",light:"4.19rem"},{name:"size_4",light:"5.33rem"},{name:"size_5",light:"6.78rem"},{name:"size_6",light:"8.62rem"},{name:"size_7",light:"10.97rem"},{name:"size_8",light:"13.95rem"},{name:"size_9",light:"17.74rem"},{name:"link_color",light:"hsl(var(--hue_1), 61%, 35%)",dark:"hsl(var(--hue_1), 61%, 58%)"},{name:"text_decoration",light:"none"},{name:"text_decoration_hover",light:"underline"},{name:"text_decoration_selected",light:"underline"},{name:"link_active",light:"var(--text_color)"},{name:"spacing_xs5",light:"0.1rem"},{name:"spacing_xs4",light:"0.2rem"},{name:"spacing_xs3",light:"0.3rem"},{name:"spacing_xs2",light:"0.4rem"},{name:"spacing_xs",light:"0.6rem"},{name:"spacing_sm",light:"0.8rem"},{name:"spacing_md",light:"1rem"},{name:"spacing_lg",light:"1.3rem"},{name:"spacing_1",light:"1.6rem"},{name:"spacing_2",light:"2.1rem"},{name:"spacing_3",light:"2.6rem"},{name:"spacing_4",light:"3.3rem"},{name:"spacing_5",light:"4.2rem"},{name:"spacing_6",light:"5.4rem"},{name:"spacing_7",light:"6.9rem"},{name:"spacing_8",light:"8.7rem"},{name:"spacing_9",light:"11.1rem"},{name:"width_md",light:"800px"},{name:"width_sm",light:"320px"},{name:"border_color",light:"var(--border_3)"},{name:"border_1",light:"hsl(var(--tint_hue), 60%, 20%, 15%)",dark:"hsl(var(--tint_hue), 60%, 80%, 85%)"},{name:"border_2",light:"hsl(var(--tint_hue), 60%, 20%, 25%)",dark:"hsl(var(--tint_hue), 60%, 80%, 70%)"},{name:"border_3",light:"hsl(var(--tint_hue), 60%, 20%, 35%)",dark:"hsl(var(--tint_hue), 60%, 80%, 50%)"},{name:"border_4",light:"hsl(var(--tint_hue), 60%, 20%, 45%)",dark:"hsl(var(--tint_hue), 60%, 80%, 40%)"},{name:"border_5",light:"hsl(var(--tint_hue), 60%, 20%, 60%)",dark:"hsl(var(--tint_hue), 60%, 80%, 30%)"},{name:"border_disabled",light:"var(--border_3)"},{name:"border_width",light:"var(--border_width_1)"},{name:"border_width_1",light:"1px"},{name:"border_width_2",light:"2px"},{name:"border_width_3",light:"3px"},{name:"border_width_4",light:"4px"},{name:"border_width_5",light:"6px"},{name:"border_width_6",light:"8px"},{name:"border_style",light:"solid"},{name:"outline_width",light:"var(--outline_width_1)"},{name:"outline_width_1",light:"0"},{name:"outline_width_2",light:"var(--border_width_2)"},{name:"outline_width_3",light:"var(--border_width_1)"},{name:"outline_style",light:"solid"},{name:"outline_color",light:"var(--color_1)"},{name:"button_bg",light:"var(--fg_1)"},{name:"button_bg_hover",light:"var(--fg_2)"},{name:"button_bg_active",light:"var(--bg_3)"},{name:"button_bg_disabled",light:"transparent"},{name:"input_bg",light:"var(--bg_5)"},{name:"input_padding_y",light:"0"},{name:"input_padding_x",light:"var(--spacing_lg)"},{name:"input_width_min",light:"100px"},{name:"input_height",light:"var(--spacing_5)"},{name:"input_height_sm",light:"var(--spacing_4)"},{name:"input_height_inner",light:"calc(var(--input_height) - 2 * var(--border_width) - 2 * var(--input_padding_y))"},{name:"box_shadow",light:"2px 4px 9px hsla(var(--tint_hue), var(--tint_saturation), 7%, 0.28), 2px 14px 48px hsla(var(--tint_hue), var(--tint_saturation), 7%, 0.28)",dark:"2px 4px 9px hsla(var(--tint_hue), var(--tint_saturation), 82%, var(--faded_5)), 2px 14px 48px hsla(var(--tint_hue), var(--tint_saturation), 82%, var(--faded_5))"},{name:"box_shadow_lg",light:"2px 6px 14px hsla(var(--tint_hue), var(--tint_saturation), 7%, 0.8), 2px 6px 48px hsla(var(--tint_hue), var(--tint_saturation), 7%, 0.8)",dark:"2px 6px 18px hsla(var(--tint_hue), var(--tint_saturation), 82%, var(--faded_5)), 2px 6px 48px hsla(var(--tint_hue), var(--tint_saturation), 82%, var(--faded_5))"},{name:"drop_shadow",light:"drop-shadow(var(--box_shadow))"},{name:"drop_shadow_lg",light:"drop-shadow(var(--box_shadow_lg))"},{name:"icon_size",light:"var(--icon_size_md)"},{name:"icon_size_xs",light:"18px"},{name:"icon_size_sm",light:"32px"},{name:"icon_size_md",light:"48px"},{name:"icon_size_lg",light:"80px"},{name:"icon_size_1",light:"128px"},{name:"icon_size_2",light:"196px"},{name:"icon_size_3",light:"316px"},{name:"icon_size_4",light:"512px"},{name:"duration_1",light:"0.08s"},{name:"duration_2",light:"0.2s"},{name:"duration_3",light:"0.5s"},{name:"duration_4",light:"1s"},{name:"duration_5",light:"1.5s"},{name:"duration_6",light:"3s"},{name:"faded_1",light:"86%"},{name:"faded_2",light:"62%"},{name:"faded_3",light:"38%"},{name:"faded_4",light:"24%"},{name:"faded_5",light:"15%"},{name:"faded_6",light:"9%"},{name:"disabled_opacity",light:"var(--faded_1)"},{name:"border_radius",light:"var(--border_radius_md)"},{name:"border_radius_md",light:"calc(var(--input_height) / 2)"},{name:"border_radius_sm",light:"calc(var(--border_radius_md) / 1.618)"},{name:"border_radius_xs",light:"calc(var(--border_radius_sm) / 1.618)"},{name:"border_radius_xs2",light:"calc(var(--border_radius_xs) / 1.618)"}],Ht={name:"base",items:[]},Rt=[Ht,{name:"low contrast",items:[{name:"tint_saturation",light:"8%"},{name:"bg",light:"hsl(var(--tint_hue), var(--tint_saturation), 86%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 18%)"}]},{name:"high contrast",items:[{name:"bg",light:"#fff",dark:"#000"},{name:"text_1",light:"hsl(var(--tint_hue), var(--tint_saturation), 8%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 90%)"},{name:"text_2",light:"hsl(var(--tint_hue), var(--tint_saturation), 16%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 83%)"},{name:"text_3",light:"hsl(var(--tint_hue), var(--tint_saturation), 24%)",dark:"hsl(var(--tint_hue), var(--tint_saturation), 75%)"}]}],Wl=["light","auto","dark"],Yl="#257e25",Ut=n=>{n==="dark"||n!=="light"&&matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},Qe="color-scheme",Jl=(n,e=Qe)=>{try{n===null?localStorage.removeItem(e):localStorage.setItem(e,n)}catch{}},Xl=(n="auto",e=Qe)=>{let t;try{t=localStorage.getItem(e)}catch{return n}return Wl.includes(t)?t:n},Kt="theme",Zl=(n,e=Kt)=>{try{n===null?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(n))}catch{}},Ql=(n=Rt[0],e=Kt)=>{try{const t=localStorage.getItem(e),l=t===null?t:JSON.parse(t);if(l)return l}catch{}return n},$l=(n="light",e=Qe)=>`
	try {
		let c = localStorage.getItem('${e}');
		if (c === 'auto' || (c !== 'dark' && c !== 'light')) {
			c = matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
		}
		if (c === 'dark') document.documentElement.classList.add('dark');
	} catch (_) { ${n==="dark"?"document.documentElement.classList.add('dark');":""} }
`,xl=n=>`<style nonce="%sveltekit.nonce%">
	${n}
</style>`,en=(n,e={})=>{const{comments:t=!1,id:l=null,empty_default_theme:i=!0,specificity:s=2}=e,a=n.name===Rt[0].name?i?null:Gl:n.items;if(!(a!=null&&a.length))return"";const o=a.map(u=>at(u)).filter(Boolean),r=a.map(u=>at(u,!0,t)).filter(Boolean),_=(l?"#"+l:":root").repeat(s);return`${o.length?`${_} {
	${o.join(`
	`)}
}`:""}
${r.length?`${_}.dark {
	${r.join(`
	`)}
}`:""}
`.trim()},at=(n,e=!1,t=!0)=>{const l=e?n.dark:n.light;return l?"--"+n.name+": "+l+";"+(t&&n.summary?" /* "+n.summary+" */":""):""},tn=Symbol("theme"),ln=n=>Dt(tn,n),nn=Symbol("color_scheme"),an=n=>Dt(nn,n),rn=n=>({style:n&1,theme_style_html:n&2,theme_setup_script:n&4,selected_theme:n&8,selected_color_scheme:n&16}),rt=n=>({style:n[0],theme_style_html:n[1],theme_setup_script:n[2],selected_theme:n[3],selected_color_scheme:n[4]});function st(n){let e,t;return{c(){e=new Ot(!1),t=le(),this.h()},l(l){e=Nt(l,!1),t=le(),this.h()},h(){e.a=t},m(l,i){e.m(n[1],l,i),A(l,t,i)},p(l,i){i&2&&e.p(l[1])},d(l){l&&(h(t),e.d())}}}function ot(n){let e,t,l,i,s,a;return{c(){e=P("meta"),t=V(),l=P("meta"),i=V(),s=P("script"),a=new Ot(!1),this.h()},l(o){e=D(o,"META",{name:!0,content:!0}),t=B(o),l=D(o,"META",{name:!0,content:!0}),i=B(o),s=D(o,"SCRIPT",{});var r=C(s);a=Nt(r,!1),r.forEach(h),this.h()},h(){g(e,"name","color-scheme"),g(e,"content",n[6]),g(l,"name","theme-color"),g(l,"content",n[5]),a.a=null},m(o,r){A(o,e,r),A(o,t,r),A(o,l,r),A(o,i,r),A(o,s,r),a.m(n[2],s)},p(o,r){r&64&&g(e,"content",o[6]),r&32&&g(l,"content",o[5]),r&4&&a.p(o[2])},d(o){o&&(h(e),h(t),h(l),h(i),h(s))}}}function sn(n){let e,t,l,i,s=n[1]&&st(n),a=n[2]&&ot(n);const o=n[22].default,r=Fe(o,n,n[21],rt);return{c(){s&&s.c(),e=le(),a&&a.c(),t=le(),l=V(),r&&r.c()},l(_){const u=At("svelte-1qw2uo0",document.head);s&&s.l(u),e=le(),a&&a.l(u),t=le(),u.forEach(h),l=B(_),r&&r.l(_)},m(_,u){s&&s.m(document.head,null),E(document.head,e),a&&a.m(document.head,null),E(document.head,t),A(_,l,u),r&&r.m(_,u),i=!0},p(_,[u]){_[1]?s?s.p(_,u):(s=st(_),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),_[2]?a?a.p(_,u):(a=ot(_),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),r&&r.p&&(!i||u&2097183)&&Ge(r,o,_,_[21],i?Ye(o,_[21],u,rn):We(_[21]),rt)},i(_){i||(w(r,_),i=!0)},o(_){I(r,_),i=!1},d(_){_&&h(l),s&&s.d(_),h(e),a&&a.d(_),h(t),r&&r.d(_)}}}function on(n,e,t){let l,i,s,a,o=X,r=()=>(o(),o=Me(H,T=>t(19,a=T)),H),_,u=X,f=()=>(u(),u=Me(M,T=>t(20,_=T)),M);n.$$.on_destroy.push(()=>o()),n.$$.on_destroy.push(()=>u());let{$$slots:m={},$$scope:d}=e,{sync_color_scheme:c=Ut}=e,{load_color_scheme:p=Xl}=e,{save_color_scheme:S=Jl}=e,{load_theme:z=Ql}=e,{save_theme:ee=Zl}=e,{selected_theme:H=De(z())}=e;r(),ln(H);let{selected_color_scheme:M=De(p())}=e;f(),an(M);let{color_scheme_fallback:v=void 0}=e,{color_scheme_css:k=void 0}=e,{theme_color:R=void 0}=e,{style:L=null}=e,{theme_style_html:$=null}=e,{theme_setup_script:oe=null}=e,Z=0,W=0,re=0;return n.$$set=T=>{"sync_color_scheme"in T&&t(7,c=T.sync_color_scheme),"load_color_scheme"in T&&t(8,p=T.load_color_scheme),"save_color_scheme"in T&&t(9,S=T.save_color_scheme),"load_theme"in T&&t(10,z=T.load_theme),"save_theme"in T&&t(11,ee=T.save_theme),"selected_theme"in T&&r(t(3,H=T.selected_theme)),"selected_color_scheme"in T&&f(t(4,M=T.selected_color_scheme)),"color_scheme_fallback"in T&&t(12,v=T.color_scheme_fallback),"color_scheme_css"in T&&t(13,k=T.color_scheme_css),"theme_color"in T&&t(14,R=T.theme_color),"style"in T&&t(0,L=T.style),"theme_style_html"in T&&t(1,$=T.theme_style_html),"theme_setup_script"in T&&t(2,oe=T.theme_setup_script),"$$scope"in T&&t(21,d=T.$$scope)},n.$$.update=()=>{n.$$.dirty&524288&&t(18,l=a.name),n.$$.dirty&786432&&t(0,L=l===Ht.name?null:en(a)),n.$$.dirty&1&&t(1,$=L?xl(L):null),n.$$.dirty&4096&&t(2,oe=$l(v)),n.$$.dirty&1081472&&t(15,Z++,Z)&&(c==null||c(_)),n.$$.dirty&1114624&&t(16,W++,W)&&(S==null||S(_)),n.$$.dirty&657408&&t(17,re++,re)&&(ee==null||ee(a)),n.$$.dirty&12288&&t(6,i=k??(v==="dark"||v==="light"?v:matchMedia("(prefers-color-scheme: dark)").matches?"dark light":"light dark")),n.$$.dirty&16384&&t(5,s=R??Yl)},[L,$,oe,H,M,s,i,c,p,S,z,ee,v,k,R,Z,W,re,l,a,_,d,m]}class _n extends ge{constructor(e){super(),pe(this,e,on,sn,he,{sync_color_scheme:7,load_color_scheme:8,save_color_scheme:9,load_theme:10,save_theme:11,selected_theme:3,selected_color_scheme:4,color_scheme_fallback:12,color_scheme_css:13,theme_color:14,style:0,theme_style_html:1,theme_setup_script:2})}}const un=.0033,cn=(n,e,t,l=0,i=0,s=.2,a=un)=>{n.baseTexture.setStyle(Xt.LINEAR);const o=new tl(n,e,t);o.alpha=s;const{subscribe:r,update:_}=De({sprite:o,width:e,height:t,x:l,y:i});return{subscribe:r,update_dimensions:(u,f)=>{_(m=>{const{sprite:d}=m;return!d||m.width===u&&m.height===f?m:(d.width=u,d.height=f,{...m,width:u,height:f})})},tick:u=>{_(f=>{const{sprite:m}=f;if(!m||!u)return f;const d=m.tilePosition.x+u*a,c=m.tilePosition.y+u*(a/2);return m.tilePosition.x=d,m.tilePosition.y=c,{...f,x:d,y:c}})}}};function fn(n){let e;return{c(){e=P("div"),this.h()},l(t){e=D(t,"DIV",{style:!0}),C(e).forEach(h),this.h()},h(){fe(e,"width",n[0]+"px"),fe(e,"height",n[1]+"px")},m(t,l){A(t,e,l),n[4](e)},p(t,[l]){l&1&&fe(e,"width",t[0]+"px"),l&2&&fe(e,"height",t[1]+"px")},i:X,o:X,d(t){t&&h(e),n[4](null)}}}function mn(n,e,t){let{pixi:l}=e,{width:i}=e,{height:s}=e,a;const o=_=>{if(!a)return;const{firstChild:u}=a;if(u){if(_.app.view===u)return;if(a.childNodes.length>1)throw Error(`PixiView has ${a.childNodes.length} child nodes! Expected 0 or 1.`);a.removeChild(u)}a.appendChild(_.app.view)};Je(()=>o(l)),Xe(()=>a.removeChild(l.app.view));function r(_){Ne[_?"unshift":"push"](()=>{a=_,t(2,a)})}return n.$$set=_=>{"pixi"in _&&t(3,l=_.pixi),"width"in _&&t(0,i=_.width),"height"in _&&t(1,s=_.height)},n.$$.update=()=>{n.$$.dirty&11&&(i!==l.app.renderer.width||s!==l.app.renderer.height)&&l.app.renderer.resize(i,s),n.$$.dirty&8&&o(l)},[i,s,a,l,r]}class dn extends ge{constructor(e){super(),pe(this,e,mn,fn,he,{pixi:3,width:0,height:1})}}const hn={name:"unlock",slug:"unlock",showHomeButton:!1,Preview:_l};function gn(n){let e,t;return e=new kl({props:{width:320,height:160,animationDuration:"90s",running:n[0].running,text:"deep breath"}}),{c(){K(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p(l,[i]){const s={};i&1&&(s.running=l[0].running),e.$set(s)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function pn(n,e,t){let l;const i=Mt();return J(n,i,s=>t(0,l=s)),[l,i]}class bn extends ge{constructor(e){super(),pe(this,e,pn,gn,he,{})}}const vn={name:"deep breath",slug:"deep-breath",showHomeButton:!1,Preview:bn},_t=[ol,ul,hn,cl,vn,fl,ml,dl,hl,gl,pl,bl,vl,yl],ut={portals:_t,portals_by_slug:new Map(_t.map(n=>[n.slug,n]))},yn=n=>{if(!n)return!1;const{tagName:e}=n;if(e==="INPUT"){const{type:t}=n;return t==="text"||t==="number"||t==="password"||t==="email"||t==="search"||t==="url"}return e==="TEXTAREA"||n.contentEditable==="true"},kn=(n,e=!0,t=!0)=>(t&&n.preventDefault(),e?n.stopImmediatePropagation():n.stopPropagation(),n),{window:wn}=Bt,En=n=>({}),ct=n=>({close:n[7]});function ft(n){let e;const t=n[10].default,l=Fe(t,n,n[15],ct);return{c(){l&&l.c()},l(i){l&&l.l(i)},m(i,s){l&&l.m(i,s),e=!0},p(i,s){l&&l.p&&(!e||s&32768)&&Ge(l,t,i,i[15],e?Ye(t,i[15],s,En):We(i[15]),ct)},i(i){e||(w(l,i),e=!0)},o(i){I(l,i),e=!1},d(i){l&&l.d(i)}}}function Tn(n){let e,t,l,i,s,a,o,r,_,u=n[6]&&ft(n);return{c(){e=P("div"),t=P("div"),l=P("div"),i=P("div"),s=V(),a=P("div"),u&&u.c(),this.h()},l(f){e=D(f,"DIV",{class:!0,role:!0,"aria-modal":!0,tabindex:!0});var m=C(e);t=D(m,"DIV",{class:!0});var d=C(t);l=D(d,"DIV",{class:!0});var c=C(l);i=D(c,"DIV",{class:!0,role:!0}),C(i).forEach(h),s=B(c),a=D(c,"DIV",{class:!0,role:!0});var p=C(a);u&&u.l(p),p.forEach(h),c.forEach(h),d.forEach(h),m.forEach(h),this.h()},h(){g(i,"class","dialog_bg svelte-1u54ehg"),g(i,"role","none"),Q(i,"ready",n[6]),g(a,"class","dialog_content svelte-1u54ehg"),g(a,"role","none"),g(l,"class","dialog_wrapper svelte-1u54ehg"),g(t,"class","dialog_layout svelte-1u54ehg"),g(e,"class","dialog svelte-1u54ehg"),g(e,"role","dialog"),g(e,"aria-modal",""),g(e,"tabindex","-1"),Q(e,"ready",n[6]),Q(e,"layout-page",n[0]==="page"),fe(e,"z-index",100+n[1])},m(f,m){A(f,e,m),E(e,t),E(t,l),E(l,i),E(l,s),E(l,a),u&&u.m(a,null),n[11](a),n[13](e),o=!0,r||(_=[ae(i,"mousedown",n[7]),ae(a,"mousedown",n[12])],r=!0)},p(f,m){(!o||m&64)&&Q(i,"ready",f[6]),f[6]?u?(u.p(f,m),m&64&&w(u,1)):(u=ft(f),u.c(),w(u,1),u.m(a,null)):u&&(me(),I(u,1,1,()=>{u=null}),de()),(!o||m&64)&&Q(e,"ready",f[6]),(!o||m&1)&&Q(e,"layout-page",f[0]==="page"),m&2&&fe(e,"z-index",100+f[1])},i(f){o||(w(u),o=!0)},o(f){I(u),o=!1},d(f){f&&h(e),u&&u.d(),n[11](null),n[13](null),r=!1,Ze(_)}}}function In(n){let e,t,l,i;return e=new Tl({props:{to:n[3],$$slots:{default:[Tn]},$$scope:{ctx:n}}}),e.$on("move",n[14]),{c(){K(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){q(e,s,a),t=!0,l||(i=ae(wn,"keydown",function(){Ct(n[2]?n[8]:void 0)&&(n[2]?n[8]:void 0).apply(this,arguments)}),l=!0)},p(s,[a]){n=s;const o={};a&8&&(o.to=n[3]),a&32883&&(o.$$scope={dirty:a,ctx:n}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){I(e.$$.fragment,s),t=!1},d(s){F(e,s),l=!1,i()}}}const mt="body",dt="dialog_open",ht="--dialog_open_padding_right",gt="dialog";function Sn(n,e,t){let{$$slots:l={},$$scope:i}=e;const s=Re();let{container:a=void 0}=e,{layout:o="centered"}=e,{index:r=0}=e,{active:_=!0}=e,u;const f=v=>{if(v)t(3,u=v);else{const k=document.getElementById(gt);if(k)t(3,u=k);else{const R=document.querySelector(mt);if(!R)throw Error(`Cannot find dialog root element with selector '${mt}'`);t(3,u=document.createElement("div")),t(3,u.id=gt,u),t(3,u.style.display="contents",u),R.appendChild(u)}}};let m,d;const c=v=>{v&&kn(v),s("close")},p=v=>{var k;if(v.key==="Escape"&&!yn(v.target)){const R=m.parentElement,L=(k=R==null?void 0:R.parentElement)==null?void 0:k.children,$=Array.prototype.indexOf.call(L,R);(!L||$===L.length-1||$===-1)&&c(v)}};let S=!1;Xe(()=>{r===0&&(document.body.classList.remove(dt),document.body.style.setProperty(ht,null))});function z(v){Ne[v?"unshift":"push"](()=>{d=v,t(5,d)})}const ee=v=>{v.target===d&&c(v)};function H(v){Ne[v?"unshift":"push"](()=>{m=v,t(4,m)})}const M=()=>{const v=Number(window.getComputedStyle(document.body).getPropertyValue("padding-right").slice(0,-2))||0,k=document.body.clientWidth;document.body.classList.add(dt);const L=document.body.clientWidth-k;L>0&&document.body.style.setProperty(ht,L+v+"px"),t(6,S=!0),m.focus()};return n.$$set=v=>{"container"in v&&t(9,a=v.container),"layout"in v&&t(0,o=v.layout),"index"in v&&t(1,r=v.index),"active"in v&&t(2,_=v.active),"$$scope"in v&&t(15,i=v.$$scope)},n.$$.update=()=>{n.$$.dirty&512&&f(a)},[o,r,_,u,m,d,S,c,p,a,l,z,ee,H,M,i]}class Pn extends ge{constructor(e){super(),pe(this,e,Sn,In,he,{container:9,layout:0,index:1,active:2})}}function pt(n){let e,t;return e=new Pn({props:{$$slots:{default:[Dn]},$$scope:{ctx:n}}}),e.$on("close",n[2]),{c(){K(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p(l,i){const s={};i&34&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function Dn(n){let e;return{c(){e=P("div"),this.h()},l(t){e=D(t,"DIV",{class:!0}),C(e).forEach(h),this.h()},h(){g(e,"class","dialogs svelte-1ivh6wu")},m(t,l){A(t,e,l),n[3](e)},p:X,d(t){t&&h(e),n[3](null)}}}function An(n){let e,t,l=n[0]&&pt(n);return{c(){l&&l.c(),e=le()},l(i){l&&l.l(i),e=le()},m(i,s){l&&l.m(i,s),A(i,e,s),t=!0},p(i,[s]){i[0]?l?(l.p(i,s),s&1&&w(l,1)):(l=pt(i),l.c(),w(l,1),l.m(e.parentNode,e)):l&&(me(),I(l,1,1,()=>{l=null}),de())},i(i){t||(w(l),t=!0)},o(i){I(l),t=!1},d(i){i&&h(e),l&&l.d(i)}}}function On(n,e,t){let l,i;J(n,Se,r=>t(0,l=r)),J(n,tt,r=>t(1,i=r));const s=Mt(),a=()=>{ve(Se,l=!1,l),s.resume()};function o(r){Ne[r?"unshift":"push"](()=>{i=r,tt.set(i)})}return[l,i,a,o]}class Nn extends ge{constructor(e){super(),pe(this,e,On,An,he,{})}}function Cn(n){let e,t,l=n[0]+1+"",i,s,a=n[1].name+"",o,r,_,u=n[1].author+"",f,m,d;return{c(){e=P("button"),t=P("div"),i=ne(l),s=V(),o=ne(a),r=V(),_=P("div"),f=ne(u),this.h()},l(c){e=D(c,"BUTTON",{type:!0,class:!0});var p=C(e);t=D(p,"DIV",{class:!0});var S=C(t);i=ie(S,l),S.forEach(h),s=B(p),o=ie(p,a),r=B(p),_=D(p,"DIV",{class:!0});var z=C(_);f=ie(z,u),z.forEach(h),p.forEach(h),this.h()},h(){g(t,"class","count svelte-16efu7a"),g(_,"class","author svelte-16efu7a"),g(e,"type","button"),g(e,"class","deselectable svelte-16efu7a"),Q(e,"selected",n[2])},m(c,p){A(c,e,p),E(e,t),E(t,i),E(e,s),E(e,o),E(e,r),E(e,_),E(_,f),m||(d=ae(e,"click",n[3]),m=!0)},p(c,[p]){p&1&&l!==(l=c[0]+1+"")&&Pe(i,l),p&2&&a!==(a=c[1].name+"")&&Pe(o,a),p&2&&u!==(u=c[1].author+"")&&Pe(f,u),p&4&&Q(e,"selected",c[2])},i:X,o:X,d(c){c&&h(e),m=!1,d()}}}function Ln(n,e,t){let l,i,s;const a=Re();let{playlist_item:o}=e,{index:r}=e,{playing_song:_}=e,{paused:u}=e;const f=async()=>{_&&s?(t(4,u=!u),a("paused",u)):a("play",o)};return n.$$set=m=>{"playlist_item"in m&&t(5,o=m.playlist_item),"index"in m&&t(0,r=m.index),"playing_song"in m&&t(6,_=m.playing_song),"paused"in m&&t(4,u=m.paused)},n.$$.update=()=>{n.$$.dirty&32&&t(1,{song:l}=o,l),n.$$.dirty&64&&t(7,i=_==null?void 0:_.song),n.$$.dirty&130&&t(2,s=i===l)},[r,l,s,f,u,o,_,i]}class jt extends ge{constructor(e){super(),pe(this,e,Ln,Cn,he,{playlist_item:5,index:0,playing_song:6,paused:4})}}function bt(n,e,t){const l=n.slice();return l[11]=e[t],l[13]=t,l}function zn(n){let e,t,l,i=[],s=new Map,a,o,r=lt(n[0]);const _=u=>u[11];for(let u=0;u<r.length;u+=1){let f=bt(n,r,u),m=_(f);s.set(m,i[u]=vt(m,f))}return{c(){e=P("div"),t=P("div"),l=P("ul");for(let u=0;u<i.length;u+=1)i[u].c();this.h()},l(u){e=D(u,"DIV",{class:!0});var f=C(e);t=D(f,"DIV",{class:!0});var m=C(t);l=D(m,"UL",{class:!0});var d=C(l);for(let c=0;c<i.length;c+=1)i[c].l(d);d.forEach(h),m.forEach(h),f.forEach(h),this.h()},h(){g(l,"class","svelte-vdrtfq"),g(t,"class","items-wrapper svelte-vdrtfq"),g(e,"class","playlist svelte-vdrtfq")},m(u,f){A(u,e,f),E(e,t),E(t,l);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(l,null);o=!0},p(u,f){f&13&&(r=lt(u[0]),me(),i=Ol(i,f,_,1,u,r,s,l,Nl,vt,null,bt),de())},i(u){if(!o){for(let f=0;f<r.length;f+=1)w(i[f]);u&&Ue(()=>{o&&(a||(a=Ae(e,Oe,{},!0)),a.run(1))}),o=!0}},o(u){for(let f=0;f<i.length;f+=1)I(i[f]);u&&(a||(a=Ae(e,Oe,{},!1)),a.run(0)),o=!1},d(u){u&&h(e);for(let f=0;f<i.length;f+=1)i[f].d();u&&a&&a.end()}}}function Mn(n){let e,t,l=n[5]&&yt(n);return{c(){l&&l.c(),e=le()},l(i){l&&l.l(i),e=le()},m(i,s){l&&l.m(i,s),A(i,e,s),t=!0},p(i,s){i[5]?l?(l.p(i,s),s&32&&w(l,1)):(l=yt(i),l.c(),w(l,1),l.m(e.parentNode,e)):l&&(me(),I(l,1,1,()=>{l=null}),de())},i(i){t||(w(l),t=!0)},o(i){I(l),t=!1},d(i){i&&h(e),l&&l.d(i)}}}function vt(n,e){let t,l,i;return l=new jt({props:{playlist_item:e[11],index:e[13],paused:e[2],playing_song:e[3]}}),l.$on("play",e[9]),l.$on("paused",e[10]),{key:n,first:null,c(){t=le(),K(l.$$.fragment),this.h()},l(s){t=le(),j(l.$$.fragment,s),this.h()},h(){this.first=t},m(s,a){A(s,t,a),q(l,s,a),i=!0},p(s,a){e=s;const o={};a&1&&(o.playlist_item=e[11]),a&1&&(o.index=e[13]),a&4&&(o.paused=e[2]),a&8&&(o.playing_song=e[3]),l.$set(o)},i(s){i||(w(l.$$.fragment,s),i=!0)},o(s){I(l.$$.fragment,s),i=!1},d(s){s&&h(t),F(l,s)}}}function yt(n){let e,t,l,i;return t=new jt({props:{playlist_item:n[5],index:n[4],paused:n[2],playing_song:n[3]}}),t.$on("play",n[7]),t.$on("paused",n[8]),{c(){e=P("div"),K(t.$$.fragment),this.h()},l(s){e=D(s,"DIV",{class:!0});var a=C(e);j(t.$$.fragment,a),a.forEach(h),this.h()},h(){g(e,"class","playlist svelte-vdrtfq")},m(s,a){A(s,e,a),q(t,e,null),i=!0},p(s,a){const o={};a&32&&(o.playlist_item=s[5]),a&16&&(o.index=s[4]),a&4&&(o.paused=s[2]),a&8&&(o.playing_song=s[3]),t.$set(o)},i(s){i||(w(t.$$.fragment,s),s&&Ue(()=>{i&&(l||(l=Ae(e,Oe,{},!0)),l.run(1))}),i=!0)},o(s){I(t.$$.fragment,s),s&&(l||(l=Ae(e,Oe,{},!1)),l.run(0)),i=!1},d(s){s&&h(e),F(t),s&&l&&l.end()}}}function Vn(n){let e,t,l,i;const s=[Mn,zn],a=[];function o(r,_){return r[1]?0:1}return e=o(n),t=a[e]=s[e](n),{c(){t.c(),l=le()},l(r){t.l(r),l=le()},m(r,_){a[e].m(r,_),A(r,l,_),i=!0},p(r,[_]){let u=e;e=o(r),e===u?a[e].p(r,_):(me(),I(a[u],1,1,()=>{a[u]=null}),de(),t=a[e],t?t.p(r,_):(t=a[e]=s[e](r),t.c()),w(t,1),t.m(l.parentNode,l))},i(r){i||(w(t),i=!0)},o(r){I(t),i=!1},d(r){r&&h(l),a[e].d(r)}}}function Bn(n,e,t){let l,i,s,{playlist_items:a}=e,{collapsed:o}=e,{paused:r}=e,{playing_song:_}=e;function u(c){ke.call(this,n,c)}function f(c){ke.call(this,n,c)}function m(c){ke.call(this,n,c)}function d(c){ke.call(this,n,c)}return n.$$set=c=>{"playlist_items"in c&&t(0,a=c.playlist_items),"collapsed"in c&&t(1,o=c.collapsed),"paused"in c&&t(2,r=c.paused),"playing_song"in c&&t(3,_=c.playing_song)},n.$$.update=()=>{n.$$.dirty&8&&t(6,l=_==null?void 0:_.song),n.$$.dirty&65&&t(4,i=a.findIndex(c=>c.song===l)),n.$$.dirty&17&&t(5,s=i===-1?null:a[i])},[a,o,r,_,i,s,l,u,f,m,d]}class Hn extends ge{constructor(e){super(),pe(this,e,Bn,Vn,he,{playlist_items:0,collapsed:1,paused:2,playing_song:3})}}function kt(n){let e,t,l;function i(o,r){return o[1]?Kn:o[0]<.33?Un:Rn}let s=i(n),a=s(n);return{c(){e=P("button"),a.c(),this.h()},l(o){e=D(o,"BUTTON",{class:!0});var r=C(e);a.l(r),r.forEach(h),this.h()},h(){g(e,"class","icon_button plain")},m(o,r){A(o,e,r),a.m(e,null),t||(l=ae(e,"click",n[3]),t=!0)},p(o,r){s!==(s=i(o))&&(a.d(1),a=s(o),a&&(a.c(),a.m(e,null)))},d(o){o&&h(e),a.d(),t=!1,l()}}}function Rn(n){let e;return{c(){e=ne("ðŸ”Š")},l(t){e=ie(t,"ðŸ”Š")},m(t,l){A(t,e,l)},d(t){t&&h(e)}}}function Un(n){let e;return{c(){e=ne("ðŸ”‰")},l(t){e=ie(t,"ðŸ”‰")},m(t,l){A(t,e,l)},d(t){t&&h(e)}}}function Kn(n){let e;return{c(){e=ne("ðŸ”‡")},l(t){e=ie(t,"ðŸ”‡")},m(t,l){A(t,e,l)},d(t){t&&h(e)}}}function jn(n){let e,t,l,i=Math.round(n[0]*100)+"",s,a,o="%",r,_,u,f,m=n[1]&&kt(n);return{c(){e=P("label"),m&&m.c(),t=V(),l=P("small"),s=ne(i),a=P("span"),a.textContent=o,r=V(),_=P("input"),this.h()},l(d){e=D(d,"LABEL",{title:!0,class:!0});var c=C(e);m&&m.l(c),t=B(c),l=D(c,"SMALL",{class:!0});var p=C(l);s=ie(p,i),a=D(p,"SPAN",{"data-svelte-h":!0}),Ve(a)!=="svelte-1bb94ef"&&(a.textContent=o),p.forEach(h),r=B(c),_=D(c,"INPUT",{class:!0,type:!0,step:!0,min:!0,max:!0}),c.forEach(h),this.h()},h(){g(l,"class","svelte-11zkzgy"),g(_,"class","plain"),g(_,"type","range"),g(_,"step",.01),g(_,"min",0),g(_,"max",1),_.value=n[0],g(e,"title","volume"),g(e,"class","svelte-11zkzgy"),Q(e,"muted",n[1])},m(d,c){A(d,e,c),m&&m.m(e,null),E(e,t),E(e,l),E(l,s),E(l,a),E(e,r),E(e,_),u||(f=ae(_,"input",n[4]),u=!0)},p(d,[c]){d[1]?m?m.p(d,c):(m=kt(d),m.c(),m.m(e,t)):m&&(m.d(1),m=null),c&1&&i!==(i=Math.round(d[0]*100)+"")&&Pe(s,i),c&1&&(_.value=d[0]),c&2&&Q(e,"muted",d[1])},i:X,o:X,d(d){d&&h(e),m&&m.d(),u=!1,f()}}}function qn(n,e,t){const l=Re();let{volume:i=1}=e,{muted:s=!1}=e;const a=()=>{t(1,s=!s),l("muted",s)},o=r=>{t(0,i=Number(r.currentTarget.value)),l("volume",i)};return n.$$set=r=>{"volume"in r&&t(0,i=r.volume),"muted"in r&&t(1,s=r.muted)},[i,s,l,a,o]}class Fn extends ge{constructor(e){super(),pe(this,e,qn,jn,he,{volume:0,muted:1})}}function Gn(n){let e;return{c(){e=ne("â¸")},l(t){e=ie(t,"â¸")},m(t,l){A(t,e,l)},d(t){t&&h(e)}}}function Wn(n){let e;return{c(){e=ne("âµ")},l(t){e=ie(t,"âµ")},m(t,l){A(t,e,l)},d(t){t&&h(e)}}}function Yn(n){let e,t,l=n[20](n[9]||0)+"",i,s,a=n[20](n[13])+"",o,r;return{c(){e=P("div"),t=P("span"),i=ne(l),s=P("span"),o=ne(a),this.h()},l(_){e=D(_,"DIV",{class:!0});var u=C(e);t=D(u,"SPAN",{});var f=C(t);i=ie(f,l),f.forEach(h),s=D(u,"SPAN",{});var m=C(s);o=ie(m,a),m.forEach(h),u.forEach(h),this.h()},h(){g(e,"class","box")},m(_,u){A(_,e,u),E(e,t),E(t,i),E(e,s),E(s,o)},p(_,u){u[0]&512&&l!==(l=_[20](_[9]||0)+"")&&Pe(i,l),u[0]&8192&&a!==(a=_[20](_[13])+"")&&Pe(o,a)},i(_){_&&(r||Ue(()=>{r=Gt(e,Pl,{}),r.start()}))},o:X,d(_){_&&h(e)}}}function Jn(n){let e,t;return e=new Al({}),{c(){K(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p:X,i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function Xn(n){let e;return{c(){e=ne("âˆ’")},l(t){e=ie(t,"âˆ’")},m(t,l){A(t,e,l)},d(t){t&&h(e)}}}function Zn(n){let e;return{c(){e=ne("+")},l(t){e=ie(t,"+")},m(t,l){A(t,e,l)},d(t){t&&h(e)}}}function wt(n){let e,t,l,i,s,a,o;t=new Fn({props:{volume:n[6],muted:n[7]}}),t.$on("volume",n[29]),t.$on("muted",n[30]);let r=n[3]!==null&&Et(n),_=n[2]!==null&&Tt(n);return{c(){e=P("footer"),K(t.$$.fragment),l=V(),i=P("div"),r&&r.c(),s=V(),_&&_.c(),this.h()},l(u){e=D(u,"FOOTER",{class:!0});var f=C(e);j(t.$$.fragment,f),l=B(f),i=D(f,"DIV",{class:!0});var m=C(i);r&&r.l(m),s=B(m),_&&_.l(m),m.forEach(h),f.forEach(h),this.h()},h(){g(i,"class","box row"),g(e,"class","svelte-19nvor2")},m(u,f){A(u,e,f),q(t,e,null),E(e,l),E(e,i),r&&r.m(i,null),E(i,s),_&&_.m(i,null),o=!0},p(u,f){const m={};f[0]&64&&(m.volume=u[6]),f[0]&128&&(m.muted=u[7]),t.$set(m),u[3]!==null?r?r.p(u,f):(r=Et(u),r.c(),r.m(i,s)):r&&(r.d(1),r=null),u[2]!==null?_?_.p(u,f):(_=Tt(u),_.c(),_.m(i,null)):_&&(_.d(1),_=null)},i(u){o||(w(t.$$.fragment,u),u&&Ue(()=>{o&&(a||(a=Ae(e,Oe,{},!0)),a.run(1))}),o=!0)},o(u){I(t.$$.fragment,u),u&&(a||(a=Ae(e,Oe,{},!1)),a.run(0)),o=!1},d(u){u&&h(e),F(t),r&&r.d(),_&&_.d(),u&&a&&a.end()}}}function Et(n){let e,t,l,i,s;return{c(){e=P("button"),t=ne("ðŸ”"),this.h()},l(a){e=D(a,"BUTTON",{type:!0,class:!0,title:!0});var o=C(e);t=ie(o,"ðŸ”"),o.forEach(h),this.h()},h(){g(e,"type","button"),g(e,"class","togglable icon_button plain deselectable svelte-19nvor2"),g(e,"title",l="repeat is "+(n[3]?"enabled":"disabled")),Q(e,"selected",n[3])},m(a,o){A(a,e,o),E(e,t),i||(s=ae(e,"click",n[31]),i=!0)},p(a,o){o[0]&8&&l!==(l="repeat is "+(a[3]?"enabled":"disabled"))&&g(e,"title",l),o[0]&8&&Q(e,"selected",a[3])},d(a){a&&h(e),i=!1,s()}}}function Tt(n){let e,t,l,i,s;return{c(){e=P("button"),t=ne("ðŸ”€"),this.h()},l(a){e=D(a,"BUTTON",{type:!0,class:!0,title:!0});var o=C(e);t=ie(o,"ðŸ”€"),o.forEach(h),this.h()},h(){g(e,"type","button"),g(e,"class","togglable icon_button plain deselectable svelte-19nvor2"),g(e,"title",l="shuffle is "+(n[2]?"enabled":"disabled")),Q(e,"selected",n[2])},m(a,o){A(a,e,o),E(e,t),i||(s=ae(e,"click",n[32]),i=!0)},p(a,o){o[0]&4&&l!==(l="shuffle is "+(a[2]?"enabled":"disabled"))&&g(e,"title",l),o[0]&4&&Q(e,"selected",a[2])},d(a){a&&h(e),i=!1,s()}}}function Qn(n){let e,t,l,i,s,a,o,r,_,u,f,m,d,c,p,S,z,ee="â®",H,M,v,k,R,L,$="â­",oe,Z,W,re,T,ue,te,be,Ee;function Te(O,U){return O[10]?Wn:Gn}let y=Te(n),Y=y(n);const _e=[Jn,Yn],x=[];function Ce(O,U){return O[11]==="pending"?0:O[13]!=null?1:-1}~(c=Ce(n))&&(p=x[c]=_e[c](n));function Le(O,U){return O[1]?Zn:Xn}let Ie=Le(n),ce=Ie(n);T=new Hn({props:{playlist_items:n[5],collapsed:n[1],paused:n[0],playing_song:n[4]}}),T.$on("play",n[27]),T.$on("paused",n[28]);let G=!n[1]&&wt(n);return{c(){e=P("div"),t=P("div"),l=P("header"),i=P("button"),Y.c(),a=V(),o=P("label"),r=P("input"),m=V(),d=P("div"),p&&p.c(),S=V(),z=P("button"),z.textContent=ee,H=V(),M=P("button"),v=ne("â¹"),R=V(),L=P("button"),L.textContent=$,oe=V(),Z=P("button"),ce.c(),re=V(),K(T.$$.fragment),ue=V(),G&&G.c(),this.h()},l(O){e=D(O,"DIV",{class:!0});var U=C(e);t=D(U,"DIV",{class:!0});var b=C(t);l=D(b,"HEADER",{class:!0});var N=C(l);i=D(N,"BUTTON",{title:!0,type:!0,class:!0});var se=C(i);Y.l(se),se.forEach(h),a=B(N),o=D(N,"LABEL",{class:!0,title:!0});var ze=C(o);r=D(ze,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),m=B(ze),d=D(ze,"DIV",{class:!0});var $e=C(d);p&&p.l($e),$e.forEach(h),ze.forEach(h),S=B(N),z=D(N,"BUTTON",{title:!0,type:!0,class:!0,"data-svelte-h":!0}),Ve(z)!=="svelte-1v0spi6"&&(z.textContent=ee),H=B(N),M=D(N,"BUTTON",{title:!0,type:!0,class:!0});var xe=C(M);v=ie(xe,"â¹"),xe.forEach(h),R=B(N),L=D(N,"BUTTON",{title:!0,type:!0,class:!0,"data-svelte-h":!0}),Ve(L)!=="svelte-af82us"&&(L.textContent=$),oe=B(N),Z=D(N,"BUTTON",{title:!0,type:!0,class:!0});var et=C(Z);ce.l(et),et.forEach(h),N.forEach(h),re=B(b),j(T.$$.fragment,b),ue=B(b),G&&G.l(b),b.forEach(h),U.forEach(h),this.h()},h(){g(i,"title",s=n[10]?"play":"pause"),g(i,"type","button"),g(i,"class","icon_button plain svelte-19nvor2"),r.disabled=_=n[13]==null,g(r,"class","plain"),g(r,"type","range"),g(r,"min",0),g(r,"max",u=n[13]??1),g(r,"step",.01),r.value=f=n[9]??0,fe(r,"flex","1"),g(d,"class","timestamp svelte-19nvor2"),g(o,"class","duration box row svelte-19nvor2"),g(o,"title","time"),g(z,"title","restart or previous"),g(z,"type","button"),g(z,"class","icon_button plain svelte-19nvor2"),g(M,"title","stop"),g(M,"type","button"),g(M,"class","icon_button plain svelte-19nvor2"),M.disabled=k=!n[8],g(L,"title","next"),g(L,"type","button"),g(L,"class","icon_button plain svelte-19nvor2"),g(Z,"title",W=n[1]?"expand":"collapse"),g(Z,"type","button"),g(Z,"class","icon_button plain svelte-19nvor2"),g(l,"class","box row svelte-19nvor2"),g(t,"class","content svelte-19nvor2"),g(e,"class","media_player svelte-19nvor2")},m(O,U){A(O,e,U),E(e,t),E(t,l),E(l,i),Y.m(i,null),E(l,a),E(l,o),E(o,r),E(o,m),E(o,d),~c&&x[c].m(d,null),E(l,S),E(l,z),E(l,H),E(l,M),E(M,v),E(l,R),E(l,L),E(l,oe),E(l,Z),ce.m(Z,null),E(t,re),q(T,t,null),E(t,ue),G&&G.m(t,null),te=!0,be||(Ee=[ae(i,"click",n[22]),ae(r,"input",n[19]),ae(z,"click",n[23]),ae(M,"click",n[24]),ae(L,"click",n[25]),ae(Z,"click",n[26])],be=!0)},p(O,U){y!==(y=Te(O))&&(Y.d(1),Y=y(O),Y&&(Y.c(),Y.m(i,null))),(!te||U[0]&1024&&s!==(s=O[10]?"play":"pause"))&&g(i,"title",s),(!te||U[0]&8192&&_!==(_=O[13]==null))&&(r.disabled=_),(!te||U[0]&8192&&u!==(u=O[13]??1))&&g(r,"max",u),(!te||U[0]&512&&f!==(f=O[9]??0))&&(r.value=f);let b=c;c=Ce(O),c===b?~c&&x[c].p(O,U):(p&&(me(),I(x[b],1,1,()=>{x[b]=null}),de()),~c?(p=x[c],p?p.p(O,U):(p=x[c]=_e[c](O),p.c()),w(p,1),p.m(d,null)):p=null),(!te||U[0]&256&&k!==(k=!O[8]))&&(M.disabled=k),Ie!==(Ie=Le(O))&&(ce.d(1),ce=Ie(O),ce&&(ce.c(),ce.m(Z,null))),(!te||U[0]&2&&W!==(W=O[1]?"expand":"collapse"))&&g(Z,"title",W);const N={};U[0]&32&&(N.playlist_items=O[5]),U[0]&2&&(N.collapsed=O[1]),U[0]&1&&(N.paused=O[0]),U[0]&16&&(N.playing_song=O[4]),T.$set(N),O[1]?G&&(me(),I(G,1,1,()=>{G=null}),de()):G?(G.p(O,U),U[0]&2&&w(G,1)):(G=wt(O),G.c(),w(G,1),G.m(t,null))},i(O){te||(w(p),w(T.$$.fragment,O),w(G),te=!0)},o(O){I(p),I(T.$$.fragment,O),I(G),te=!1},d(O){O&&h(e),Y.d(),~c&&x[c].d(),ce.d(),F(T),G&&G.d(),be=!1,Ze(Ee)}}}const $n=.29;function xn(n,e,t){let l,i,s,a,o,r,_,u=X,f=()=>(u(),u=Me(a,b=>t(21,_=b)),a);n.$$.on_destroy.push(()=>u());const m=Re();let{playing_song:d}=e,{playlist_items:c}=e,{collapsed:p=!1}=e,{paused:S=!1}=e,{volume:z=1}=e,{muted:ee=!1}=e,{shuffle:H=!1}=e,{repeat:M=!1}=e,v=null,k=null;const R=async b=>{if(!b||(v=b,!b.ended||b.ended===k)||(k=b.ended,await b.ended,k!==b.ended))return;const N=M?c.find(se=>se.song===b.song):re();N&&m("play",N)},L=()=>{if(l)t(0,S=!S),m("paused",S);else{const b=v||re();b&&m("play",b)}},$=()=>{m("stop")},oe=async()=>{const b=s||(v==null?void 0:v.audio_el);if(!b||b.currentTime<$n){const N=W();N&&m("play",N)}else b.currentTime=0},Z=async()=>{const b=re();b&&m("play",b)},W=()=>{if(c.length<=1)return c[0];if(H)return T(d||v);const b=d?c.findIndex(se=>se.song===d.song):v?c.findIndex(se=>se.song===v.song):1,N=b===0?c.length-1:b-1;return c[N]},re=()=>{if(c.length<=1)return c[0];if(H)return T(d||v);const b=d?c.findIndex(se=>se.song===d.song):v?c.findIndex(se=>se.song===v.song):c.length-1,N=b===c.length-1?0:b+1;return c[N]},T=b=>{if(c.length===0)return;if(c.length===1)return c[0];let N;do N=Dl(c);while(N===b);return N};let ue,te;const be=()=>{t(9,ue=s==null?void 0:s.currentTime),te=requestAnimationFrame(be)};Je(()=>{be()}),Xe(()=>{cancelAnimationFrame(te)});const Ee=b=>{ye(b);const N=Number(b.currentTarget.value);Number.isNaN(N)||s&&(s.currentTime=N)},Te=b=>{const N=b/60|0,se=(b|0)%60;return N+":"+(se<10?"0":"")+se},y=()=>L(),Y=()=>oe(),_e=()=>$(),x=()=>Z(),Ce=()=>t(1,p=!p);function Le(b){ke.call(this,n,b)}function Ie(b){ke.call(this,n,b)}function ce(b){ke.call(this,n,b)}function G(b){ke.call(this,n,b)}const O=()=>{t(3,M=!M),m("repeat",M)},U=()=>{t(2,H=!H),m("shuffle",H)};return n.$$set=b=>{"playing_song"in b&&t(4,d=b.playing_song),"playlist_items"in b&&t(5,c=b.playlist_items),"collapsed"in b&&t(1,p=b.collapsed),"paused"in b&&t(0,S=b.paused),"volume"in b&&t(6,z=b.volume),"muted"in b&&t(7,ee=b.muted),"shuffle"in b&&t(2,H=b.shuffle),"repeat"in b&&t(3,M=b.repeat)},n.$$.update=()=>{n.$$.dirty[0]&16&&console.log("[MediaPlayer playing_song]",d,d==null?void 0:d.audio_el),n.$$.dirty[0]&16&&t(8,l=!!d),n.$$.dirty[0]&16&&t(13,i=d==null?void 0:d.duration),n.$$.dirty[0]&16&&(s=d==null?void 0:d.audio_el),n.$$.dirty[0]&16&&f(t(12,a=d==null?void 0:d.audio)),n.$$.dirty[0]&2097152&&t(11,o=_==null?void 0:_.status),n.$$.dirty[0]&16&&d&&R(d),n.$$.dirty[0]&257&&t(10,r=!l||S)},[S,p,H,M,d,c,z,ee,l,ue,r,o,a,i,m,L,$,oe,Z,Ee,Te,_,y,Y,_e,x,Ce,Le,Ie,ce,G,O,U]}class ei extends ge{constructor(e){super(),pe(this,e,xn,Qn,he,{playing_song:4,playlist_items:5,collapsed:1,paused:0,volume:6,muted:7,shuffle:2,repeat:3},null,[-1,-1])}}function It(n){let e,t,l;return t=new Be({props:{$$slots:{default:[li]},$$scope:{ctx:n}}}),{c(){e=P("div"),K(t.$$.fragment),this.h()},l(i){e=D(i,"DIV",{class:!0});var s=C(e);j(t.$$.fragment,s),s.forEach(h),this.h()},h(){g(e,"class","prose box")},m(i,s){A(i,e,s),q(t,e,null),l=!0},i(i){l||(w(t.$$.fragment,i),l=!0)},o(i){I(t.$$.fragment,i),l=!1},d(i){i&&h(e),F(t)}}}function ti(n){let e;return{c(){e=ne("ðŸŒ ")},l(t){e=ie(t,"ðŸŒ ")},m(t,l){A(t,e,l)},d(t){t&&h(e)}}}function li(n){let e,t;return e=new Sl({props:{$$slots:{default:[ti]},$$scope:{ctx:n}}}),{c(){K(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p(l,i){const s={};i&524288&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function ni(n){let e,t,l;function i(a){n[11](a)}let s={playing_song:n[2],playlist_items:n[8],volume:n[3],muted:n[4],paused:n[5],shuffle:n[6],repeat:n[7]};return n[0]!==void 0&&(s.collapsed=n[0]),e=new ei({props:s}),Ne.push(()=>Wt(e,"collapsed",i)),e.$on("play",n[12]),e.$on("stop",n[13]),e.$on("paused",n[14]),e.$on("volume",n[15]),e.$on("muted",n[16]),e.$on("shuffle",n[17]),e.$on("repeat",n[18]),{c(){K(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){q(e,a,o),l=!0},p(a,o){const r={};o&4&&(r.playing_song=a[2]),o&8&&(r.volume=a[3]),o&16&&(r.muted=a[4]),o&32&&(r.paused=a[5]),o&64&&(r.shuffle=a[6]),o&128&&(r.repeat=a[7]),!t&&o&1&&(t=!0,r.collapsed=a[0],qt(()=>t=!1)),e.$set(r)},i(a){l||(w(e.$$.fragment,a),l=!0)},o(a){I(e.$$.fragment,a),l=!1},d(a){F(e,a)}}}function ii(n){let e,t;return e=new Kl({}),{c(){K(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function ai(n){let e,t;return e=new Ul({props:{href:zt+"/about",$$slots:{default:[ii]},$$scope:{ctx:n}}}),{c(){K(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p(l,i){const s={};i&524288&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function ri(n){let e,t,l,i,s,a,o=n[1].url.pathname!=="/"&&It(n);return l=new Be({props:{$$slots:{default:[ni]},$$scope:{ctx:n}}}),s=new Be({props:{$$slots:{default:[ai]},$$scope:{ctx:n}}}),{c(){e=P("div"),o&&o.c(),t=V(),K(l.$$.fragment),i=V(),K(s.$$.fragment)},l(r){e=D(r,"DIV",{});var _=C(e);o&&o.l(_),t=B(_),j(l.$$.fragment,_),i=B(_),j(s.$$.fragment,_),_.forEach(h)},m(r,_){A(r,e,_),o&&o.m(e,null),E(e,t),q(l,e,null),E(e,i),q(s,e,null),a=!0},p(r,[_]){r[1].url.pathname!=="/"?o?_&2&&w(o,1):(o=It(r),o.c(),w(o,1),o.m(e,t)):o&&(me(),I(o,1,1,()=>{o=null}),de());const u={};_&524541&&(u.$$scope={dirty:_,ctx:r}),l.$set(u);const f={};_&524288&&(f.$$scope={dirty:_,ctx:r}),s.$set(f)},i(r){a||(w(o),w(l.$$.fragment,r),w(s.$$.fragment,r),a=!0)},o(r){I(o),I(l.$$.fragment,r),I(s.$$.fragment,r),a=!1},d(r){r&&h(e),o&&o.d(),F(l),F(s)}}}const St="media_player_collapsed",si=!1;function oi(n,e,t){let l,i,s,a,o,r,_;J(n,Lt,k=>t(1,l=k)),J(n,Vt,k=>t(2,i=k)),J(n,He,k=>t(3,s=k)),J(n,qe,k=>t(4,a=k)),J(n,Ml,k=>t(5,o=k)),J(n,nt,k=>t(6,r=k)),J(n,it,k=>t(7,_=k));const u=Array.from(Cl.values()).map(k=>({song:k}));let f=Ll(St,si),m=f;const d=async k=>{const{song:R}=k;await Vl(R)};function c(k){f=k,t(0,f)}const p=k=>d(k.detail),S=()=>Bl(i),z=k=>k.detail?Hl(i):Rl(i),ee=k=>ve(He,s=k.detail,s),H=k=>ve(qe,a=k.detail,a),M=k=>ve(nt,r=k.detail,r),v=k=>ve(it,_=k.detail,_);return n.$$.update=()=>{n.$$.dirty&1025&&m!==f&&(t(10,m=f),zl(St,f))},[f,l,i,s,a,o,r,_,u,d,m,c,p,S,z,ee,H,M,v]}class _i extends ge{constructor(e){super(),pe(this,e,oi,ri,he,{})}}const{window:je}=Bt;function ui(n){let e,t;return e=new Be({props:{$$slots:{default:[mi]},$$scope:{ctx:n}}}),{c(){K(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p(l,i){const s={};i&67108864&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function ci(n){return{c:X,l:X,m:X,p:X,i:X,o:X,d:X}}function fi(n){let e,t,l,i;const s=[hi,di],a=[];function o(r,_){return r[5]!=="success"?0:1}return e=o(n),t=a[e]=s[e](n),{c(){t.c(),l=le()},l(r){t.l(r),l=le()},m(r,_){a[e].m(r,_),A(r,l,_),i=!0},p(r,_){let u=e;e=o(r),e===u?a[e].p(r,_):(me(),I(a[u],1,1,()=>{a[u]=null}),de(),t=a[e],t?t.p(r,_):(t=a[e]=s[e](r),t.c()),w(t,1),t.m(l.parentNode,l))},i(r){i||(w(t),i=!0)},o(r){I(t),i=!1},d(r){r&&h(l),a[e].d(r)}}}function mi(n){let e,t=`<h1>blip :(</h1> <p>It looks like your browser doesn&#39;t support WebGL, and sadly this website requires it. I&#39;m
					sorry, please try another browser or device if you can. (or enable it?)</p> <p>source code is at <a href="https://github.com/ryanatkn/cosmicplayground">github.com/ryanatkn/cosmicplayground</a></p>`;return{c(){e=P("div"),e.innerHTML=t,this.h()},l(l){e=D(l,"DIV",{class:!0,"data-svelte-h":!0}),Ve(e)!=="svelte-1ujtcob"&&(e.innerHTML=t),this.h()},h(){g(e,"class","prose")},m(l,i){A(l,e,i)},p:X,d(l){l&&h(e)}}}function di(n){let e,t,l,i,s,a,o,r,_,u;t=new dn({props:{pixi:n[11],width:n[3].width,height:n[3].height}});let f=(!n[9].selected_portal||n[9].selected_portal.showHomeButton)&&Pt(n);const m=n[24].default,d=Fe(m,n,n[26],null);return o=new Nn({}),_=new Il({props:{$$slots:{default:[pi]},$$scope:{ctx:n}}}),{c(){e=P("div"),K(t.$$.fragment),l=V(),i=P("main"),f&&f.c(),s=V(),d&&d.c(),a=V(),K(o.$$.fragment),r=V(),K(_.$$.fragment),this.h()},l(c){e=D(c,"DIV",{class:!0,style:!0});var p=C(e);j(t.$$.fragment,p),p.forEach(h),l=B(c),i=D(c,"MAIN",{class:!0});var S=C(i);f&&f.l(S),s=B(S),d&&d.l(S),S.forEach(h),a=B(c),j(o.$$.fragment,c),r=B(c),j(_.$$.fragment,c),this.h()},h(){g(e,"class","pixi-wrapper fade-in svelte-y6kwh3"),fe(e,"width",n[3].width+"px"),fe(e,"height",n[3].height+"px"),g(i,"class","fade-in svelte-y6kwh3"),Q(i,"paused",!n[2].running),Q(i,"secret",n[1].secret_enabled),Q(i,"idle",n[8]||n[1].idle_mode)},m(c,p){A(c,e,p),q(t,e,null),A(c,l,p),A(c,i,p),f&&f.m(i,null),E(i,s),d&&d.m(i,null),A(c,a,p),q(o,c,p),A(c,r,p),q(_,c,p),u=!0},p(c,p){const S={};p&8&&(S.width=c[3].width),p&8&&(S.height=c[3].height),t.$set(S),(!u||p&8)&&fe(e,"width",c[3].width+"px"),(!u||p&8)&&fe(e,"height",c[3].height+"px"),!c[9].selected_portal||c[9].selected_portal.showHomeButton?f?p&512&&w(f,1):(f=Pt(c),f.c(),w(f,1),f.m(i,s)):f&&(me(),I(f,1,1,()=>{f=null}),de()),d&&d.p&&(!u||p&67108864)&&Ge(d,m,c,c[26],u?Ye(m,c[26],p,null):We(c[26]),null),(!u||p&4)&&Q(i,"paused",!c[2].running),(!u||p&2)&&Q(i,"secret",c[1].secret_enabled),(!u||p&258)&&Q(i,"idle",c[8]||c[1].idle_mode);const z={};p&67108864&&(z.$$scope={dirty:p,ctx:c}),_.$set(z)},i(c){u||(w(t.$$.fragment,c),w(f),w(d,c),w(o.$$.fragment,c),w(_.$$.fragment,c),u=!0)},o(c){I(t.$$.fragment,c),I(f),I(d,c),I(o.$$.fragment,c),I(_.$$.fragment,c),u=!1},d(c){c&&(h(e),h(l),h(i),h(a),h(r)),F(t),f&&f.d(),d&&d.d(c),F(o,c),F(_,c)}}}function hi(n){let e,t;return e=new wl({props:{status:n[5]}}),{c(){K(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p(l,i){const s={};i&32&&(s.status=l[5]),e.$set(s)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function Pt(n){let e,t;return e=new nl({props:{$$slots:{default:[gi]},$$scope:{ctx:n}}}),{c(){K(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function gi(n){let e,t;return e=new il({}),{c(){K(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function pi(n){let e,t;return e=new _i({}),{c(){K(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function bi(n){let e,t,l,i;const s=[fi,ci,ui],a=[];function o(r,_){return r[4]?0:r[4]===null?1:2}return e=o(n),t=a[e]=s[e](n),{c(){t.c(),l=le()},l(r){t.l(r),l=le()},m(r,_){a[e].m(r,_),A(r,l,_),i=!0},p(r,_){let u=e;e=o(r),e===u?a[e].p(r,_):(me(),I(a[u],1,1,()=>{a[u]=null}),de(),t=a[e],t?t.p(r,_):(t=a[e]=s[e](r),t.c()),w(t,1),t.m(l.parentNode,l))},i(r){i||(w(t),i=!0)},o(r){I(t),i=!1},d(r){r&&h(l),a[e].d(r)}}}function vi(n){let e,t,l,i,s,a;return l=new _n({props:{selected_color_scheme:n[10],color_scheme_fallback:n[7],$$slots:{default:[bi]},$$scope:{ctx:n}}}),{c(){t=V(),K(l.$$.fragment),this.h()},l(o){At("svelte-12e3mlr",document.head).forEach(h),t=B(o),j(l.$$.fragment,o),this.h()},h(){document.title="cosmicplayground"},m(o,r){A(o,t,r),q(l,o,r),i=!0,s||(a=[Ft(e=xt.call(null,je,{idle:n[16],time_to_go_idle:n[6],idle_interval_time:1e3})),ae(je,"resize",n[25]),ae(je,"keydown",n[17])],s=!0)},p(o,[r]){e&&Ct(e.update)&&r&64&&e.update.call(null,{idle:o[16],time_to_go_idle:o[6],idle_interval_time:1e3});const _={};r&128&&(_.color_scheme_fallback=o[7]),r&67109694&&(_.$$scope={dirty:r,ctx:o}),l.$set(_)},i(o){i||(w(l.$$.fragment,o),i=!0)},o(o){I(l.$$.fragment,o),i=!1},d(o){o&&h(t),F(l,o),s=!1,Ze(a)}}}function yi(n,e,t){let l,i,s,a,o,r,_,u,f,m,d,c=X,p=()=>(c(),c=Me(W,y=>t(28,d=y)),W),S,z,ee,H;J(n,Lt,y=>t(20,o=y)),J(n,Se,y=>t(27,r=y)),J(n,He,y=>t(21,u=y)),J(n,qe,y=>t(22,f=y)),J(n,Vt,y=>t(23,m=y)),n.$$.on_destroy.push(()=>c());let{$$slots:M={},$$scope:v}=e;const k=De("dark");J(n,k,y=>t(7,z=y)),Ut(z),Yt(()=>{ve(Se,r=!1,r)});let R=null;const L=new Qt;console.log("pixi",L);const $=$t();J(n,$,y=>t(2,_=y));const oe=jl(De({width:window.innerWidth,height:window.innerHeight}));J(n,oe,y=>t(3,S=y)),Zt(L);const Z=zt+"/assets/space/galaxies.jpg";let W,re="initial";Je(async()=>{const y=T();y&&await y,t(5,re="pending");try{L.init({width:S.width,height:S.height,sharedTicker:!0}),t(4,R=!0)}catch(_e){console.error("failed to create PixiApp",_e),t(4,R=!1),console.error(_e)}const Y=await Jt.load(Z);p(t(0,W=cn(Y,S.width,S.height))),L.default_scene.addChild(d.sprite),t(5,re="success")});const T=()=>{const{hash:y}=window.location;if(y)return window.location.hash="",Ke("/"+y.substring(1),{replaceState:!0})},ue=al({audio_enabled:!0,dev_mode:!1,recording_mode:!1,idle_mode:!1,time_to_go_idle:6e3});J(n,ue,y=>t(1,a=y)),$.resume();const te=rl({data:ut,selected_portal:ut.portals_by_slug.get(o.url.pathname.substring(1))||null});J(n,te,y=>t(9,H=y)),sl(te);const be=De(!1);J(n,be,y=>t(8,ee=y)),el(be),El();const Ee=async y=>{const{key:Y,target:_e}=y;console.log("key",Y),Y==="`"&&!y.ctrlKey&&we(_e)?(ye(y),$.toggle()):Y==="`"&&y.ctrlKey&&we(_e)?(ye(y),ue.update(x=>({...x,dev_mode:!x.dev_mode}))):Y==="Escape"&&!y.shiftKey&&we(y.currentTarget)?(ye(y),r?(ve(Se,r=!1,r),$.resume()):(ve(Se,r=!0,r),$.pause())):Y==="Escape"&&y.shiftKey&&we(_e)?(ye(y),await Ke(o.url.pathname.split("/").slice(0,-1).join("/")||"/")):y.key==="!"&&y.ctrlKey&&we(_e)?o.url.pathname!=="/unlock/atlas"&&(ye(y),await Ke("/unlock/atlas")):Y==="-"&&!y.ctrlKey&&we(_e)?(ye(y),ue.update(x=>({...x,idle_mode:!x.idle_mode})),console.log("idle mode is now",a.idle_mode)):Y==="="&&!y.ctrlKey&&we(_e)&&(ye(y),ue.update(x=>({...x,recording_mode:!x.recording_mode})),console.log("recording mode is now",a.recording_mode))},Te=()=>ve(oe,S={width:window.innerWidth,height:window.innerHeight},S);return n.$$set=y=>{"$$scope"in y&&t(26,v=y.$$scope)},n.$$.update=()=>{n.$$.dirty&8&&console.log("$dimensions",S),n.$$.dirty&9&&(W==null||W.update_dimensions(S.width,S.height)),n.$$.dirty&5&&(W==null||W.tick(_.dt)),n.$$.dirty&8388608&&t(19,l=m==null?void 0:m.audio_el),n.$$.dirty&6815744&&l&&t(19,l.volume=f?0:u,l),n.$$.dirty&6815744&&l&&t(19,l.volume=f?0:He?u:1,l),n.$$.dirty&4&&ll(_.dt),n.$$.dirty&1048576&&t(18,i=o.url.pathname.substring(1).split("/")[0]),n.$$.dirty&262144&&te.select(i),n.$$.dirty&2&&t(6,s=a.dev_mode?99999999999:a.recording_mode?500:a.time_to_go_idle)},[W,a,_,S,R,re,s,z,ee,H,k,L,$,oe,ue,te,be,Ee,i,l,o,u,f,m,M,Te,v]}class ta extends ge{constructor(e){super(),pe(this,e,yi,vi,he,{})}}export{ta as component,ea as universal};
